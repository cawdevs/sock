<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOCK PUPPETS</title>

     <style>
      html {
           background: linear-gradient(0deg, dodgerblue ,white);
             }
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(0deg, dodgerblue,lightgray);
        }
   
        .container {

            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 30px;
        }

        .boton-conectar {
            background-color: silver;
            color: black;
            border: 2px solid silver;
            border-radius: 20px;
            padding: 5px 10px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display:inline-block;
            margin-left: 40px;
        }

        .boton-conectar:hover {
            background-color: dodgerblue;
            border-color: dodgerblue;
            display:inline-block;

        }
     
    </style>

<style>
    button {        
        
        cursor: pointer;
        transition: transform 0.2s ease-in-out, background-color 0.4s ease;
    }
    button:active {
        background-color: darkgray;
        transform: scale(0.85);
    }
</style>





     <style>
.gallery_toolbar {
  padding: 1rem;
  display: flex;
  grid-template-columns: repeat(20, 25vw);
  grid-template-rows: 1fr;
  grid-column-gap: 1rem;
  grid-row-gap: 1rem;
  overflow: scroll;

 
  scroll-snap-type: both mandatory;
  scroll-padding: 1rem;

  background-color: white;
}

.active {
  scroll-snap-type: unset;
}
</style>


<style>
    .icon-reaction-container {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-top: 10px;
    }

    .glyphicon {
        font-size: 22px;
        transition: transform 0.5s, color 0.5s;
    }

    .grow {
        transform: scale(2.5);
    }

    .reaction-option {
    margin: 0 5px;
    color: green;
    cursor: pointer;
    font-size: 16px;
    transition: transform 0.3s ease, font-size 0.3s ease;
}

.reaction-option.grow {
    transform: scale(2);
    font-size: 24px;
}

.reaction-group {
    display: flex;
    gap: 10px;
    margin-top: 5px;
    justify-content: center;
}

</style>


<style>
        body {
            font-family: Arial, sans-serif;
            overflow-x: hidden;
        }

        /* Men√∫ lateral */
        .menu {
            position: fixed;
            top: 0;
            left: -250px;
            width: 250px;
            height: 100vh;
            background: black;
            color: white;
            padding: 20px;
            transition: left 0.3s ease-in-out;
            z-index: 9999; /* üî• Esto lo pone por encima de casi todo */

        }

        .menu ul {
            list-style: none;
            padding: 0;
        }

        .menu ul li {
            margin: 15px 0;
        }

        .menu ul li a {
            color: white;
            text-decoration: none;
        }

        .menu.show {
            left: 0;
        }

        /* Bot√≥n de men√∫ (visible en PC) */
        .menu-button {
            position: relative;
            top: 20px;
            left: 20px;
            background: black;
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            z-index: 100;
            border-radius: 5px;
        }

        /* Ocultar la primera columna en m√≥viles y usarla como men√∫ */
        @media (max-width: 768px) {
            .col-sm-3:first-child {
                display: none;
            }

            .menu-button {
                display: none;
            }
        }
    </style>


<style>
    .colored-blue { color: blue; font-weight: bold; }
    .colored-purple { color: purple; font-weight: bold; }
    .colored-green { color: green; font-weight: bold; }
    .colored-red { color: red; font-weight: bold; }
</style>





<!--
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
-->

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>


<!-- Agrega el siguiente script para cargar la biblioteca desde un CDN -->
<script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>

<!-- para usar numeros grandisimos en javascript-->

<script src="https://cdn.jsdelivr.net/npm/bignumber.js@9.1.1/bignumber.min.js"></script>


<!-- Quill CSS -->
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<!-- Quill JS -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>


</head>


<body>
<script src="messageDirect.js"></script>
<script src="stakingpool.js"></script>
<script src="responses.js"></script>

<script src="FreeDistributionSockMatic.js"></script>

<script src="MintNFTUsernameandPuppet.js"></script>
<script src="FindAndFilter.js"></script>
<script src="NFTUsername_profile.js"></script>
<script src="sendTokens.js"></script>
<script src="followControl.js"></script>
<script src="postPublication.js"></script>
<script src="reactionsPost.js"></script>
<script src="recargaCripto.js"></script>



<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>


<!--
 <center>  <div>
    <img src="images/sock_logo.SVG" alt="My svg_logo" width="45" class="img-circle" style="transform: rotate(0deg); display: inline-block; margin-left: 10px;border: 2px solid white;">
   
    <h3 style="display: inline-block; margin: 0; vertical-align: middle; margin-left: 10px;"><font color="white"><i> SockPuppets </i></font> </h3>
<i class="fa-brands fa-github" style="color: #FFD43B;"></i>

     <a  href="whiteDocument.html" target="_blank" ><img src="images/icons/document_icon.SVG" alt="My svg_logo" width="25"  style="transform: rotate(0deg); display: inline-block; margin-left: 20px; "></a>

    

     <a href="https://github.com/cawdevs" target="_blank" rel="noopener noreferrer"> <img src="images/logoG.SVG" alt="My svg_logo" width="25"  style="transform: rotate(0deg); display: inline-block; margin-left: 20px; ">
     </a>

     <a href="https://x.com/puppets_token" target="_blank" rel="noopener noreferrer"> <img src="images/logoX.svg" alt="My svg_logo" width="25"  style="transform: rotate(0deg); display: inline-block; margin-left: 20px; ">
     </a>

      	
    <button class="boton-conectar" id="btn-conectar" onclick="conectarMetaMask()" style="display: inline-block; margin-left: 20px;">Conect</button>



 </div></center>


-->





<!--
    <center>

    

  <h4>

<div style="display: flex; justify-content: center; align-items: center; gap: 30px;">
       
    <div id="addres-wallet" style="color: white;"></div>
    
    <a href="#" data-toggle="modal" data-target="#myModalQR" onclick="generarCodigoQR()">
        <span class="glyphicon glyphicon-qrcode" style="color: white;"></span>
    </a>

    <a href="#" id="btn-copy-key" onclick="myFunctionbtc()">
        <span class="glyphicon glyphicon-duplicate" style="color: white;"></span>
    </a>
   
    <a href="#" onclick="logout()" style="color: white;">
        <span class="glyphicon glyphicon-off"  title="Salir"> </span>
    </a>
  
</div>
 </h4>
  </center> 
-->
       

 

<div class="container-fluid">
<div class="row">

   <div class="col-sm-2"> 
   </div>

          
 <div class="col-sm-6" style="padding-left: 0; padding-right: 0;">   
 


      <div id="menu" class="menu">
               
                <ul>    
                    <li>                         
                           <center><div id="NFT_image-container" style=" width:80px;  height: 80px;"> </div></center>
                        
                    </li>   

                    <li> 
                            <center>
                            <select id="selector_NFTs" class="form-control" placeholder="Username" style="border: 2px solid dodgerblue; border-radius: 20px; font-size: 20px; height: auto; width: 180px;"></select>
                            </center>
                      
                    </li> 
  

                                                     
                      <!-- Direcci√≥n de la billetera -->
                      <li>                      
                        <a href="#" id="btn-copy-key" onclick="myFunctionbtc()">
                          <span class="glyphicon glyphicon-duplicate" style="color: white; margin-left: 8px; margin-right: 16px;"></span>                           
                          <span id="addres-wallet" style="color: white;"></span>                       
                        </a>
                      </li>          



                       <li>
                       <a data-toggle="tab" href="#menu_comprar_criptos"  onclick= "recargar_con_btc()" >
                          <img src="images/icons/btc_icon.SVG" alt="My svg_logo" width="30"  style="transform: rotate(0deg); display: inline-block; margin-left: 8px;  margin-right: 16px;">Recargar con Bitcoin

                         
                                           
                        </a>
                       </li>    
                            

                       <li>                
                        <a data-toggle="tab" href="#menu_comprar_criptos" >
                          <span class="glyphicon glyphicon-credit-card" style="transform: rotate(0deg); display: inline-block; margin-left: 8px;  margin-right: 16px; " ></span>
                          
                          <span>Recargar con tarjeta</span>
                          </a>      
                        </li>
                                     
                      
                       

                      <li>
                        <a href="#" id="btn-enviar-saldo" onclick="modal_enviarTokens()">

                          <font color="dodgerblue"><span class="glyphicon glyphicon-send" style="margin-left: 8px; margin-right: 16px;"></span></font>
                          
                          <span>Enviar</span>
                          </a>
                      </li>
                      

                      <!-- Generar c√≥digo QR -->
                      <li><a href="#" data-toggle="modal" data-target="#myModalQR" onclick="generarCodigoQR()">
                          <span class="glyphicon glyphicon-qrcode" style="color: white; margin-left: 8px; margin-right: 16px;"></span>
                          <span>Recibir</span>
                          </a>
                      </li>


                      <li>                       
                        <a href="#">
                          <span class="glyphicon glyphicon-heart" style="color: red; margin-left: 8px; margin-right: 16px;"></span>                           
                          <span>Reclamar</span>
                          <span id="total_like_username">0</span>

                        </a>
                      </li>


                        <li><a href="conocer_mas.html">
                          <span class="glyphicon glyphicon-question-sign " style="color: white; margin-left: 8px; margin-right: 16px;"></span>                           
                          <span>Aprender m√°s</span>
                          </a>
                       </li>

                      
                      <!-- Copiar clave -->
                      <li><a href="#">
                          <span class="glyphicon glyphicon-cog" style="color: white; margin-left: 8px; margin-right: 16px;"></span>                           
                          <span>Ajustes</span>
                          </a>
                       </li>


                      <li>
                          
                          <button class="boton-conectar" id="btn-conectar" data-toggle="modal" data-target="#myModal" onclick="conectarMetaMask()" style="display: inline-block; margin-left: 15px; margin-top: 5px;">Crear Usuario Nuevo</button>
                      </li>

                      <!-- Cerrar sesi√≥n -->
                      <li><a href="#" onclick="logout()" style="color: white;">
                          <span  class="glyphicon glyphicon-off"  title="Salir" style="margin-left: 4px; margin-right: 16px; margin-top: 5px;"></span>

                          <span>Salir/Cerrar</span>
                          </a>
                      </li>

                     

                 </ul>
     </div>




 

  
   
        
            

<div class="input-group" style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
  
  <!--<h3><div id="NFTUsernames-count"><em>thesocks</em>:</div></h3>-->
  <h3>
    <div style="margin-right: 10px; margin-left: 10px;">
      <font color="dodgerblue"><em>thesocks</em></font>
    </div>
  </h3>     


  <a data-toggle="tab" href="#menu_buscar" style="margin-left: 15px;">
    <img id="image-home" src="images/icons/buscar_icon.SVG" alt="home" width="35">
  </a>  




  
 <div id="estado-servidor" onclick="verificarServidor()" style="cursor: pointer; margin-left: 10px;"></div>


  <a id="menuBtn" style="margin-left: auto; margin-right: 15px; font-size: 32px;">‚ò∞</a>  

</div>


  <ul class="gallery_toolbar" style="background: linear-gradient(0deg, dodgerblue ,darkblue); border: 2px solid blue; border-radius: 0px; margin-right: 15;">     
           

       
   
  <!--    <a href="#" data-toggle="modal" data-target="#myModal_publication" onclick="createPublicationElements() " style=" margin-left: 15px;">
                <img  id="image-post" src="images/icons/post_icon.SVG" alt="post" width="35">
       </a>
   -->    
       <a data-toggle="tab" href="#menu_hacer_publicacion" onclick="abrirModalPublicacion()" style="margin-left: 15px;">
          <img id="image-post" src="images/icons/post_icon.SVG" alt="post" width="35">
       </a>


       

      
       <a data-toggle="tab" href="#home" style=" margin-left: 15px;">  <img  id="image-home" src="images/icons/home_icon.SVG" alt="home" width="35"></a> 
       
       <a data-toggle="tab" href="#menu1" style=" margin-left: 15px;">  <img  id="image-home" src="images/icons/profile_icon.SVG" alt="home" width="35"> </a>
       <!--   
       <a data-toggle="tab" href="#menu2" style=" margin-left: 15px;">  <img  id="image-cars" src="images/icons/publication_icon.SVG" alt="home" width="45"> </a>
       
       <a data-toggle="tab" href="#menu_mensaje" style=" margin-left: 15px;">  <img  id="image-food" src="images/icons/message_icon.SVG" alt="home" width="45"> </a>
       -->
       <a data-toggle="tab" href="#menu_play" style=" margin-left: 15px;">  <img  id="image-market" src="images/icons/gamefi_icon.SVG" alt="home" width="35"> </a>
       
       <!--                   
       <a data-toggle="tab" href="#menu_play_to_earn" style=" margin-left: 15px;">  <img  id="image-mymarket" src="images/icons/gamefi_icon.SVG" alt="mymarket" width="45"> </a>
       -->
       <a data-toggle="tab" href="#menu_transfer" style=" margin-left: 15px;">  <img  id="image-service" src="images/icons/swap_icon.SVG" alt="home" width="35"> </a>

        <a data-toggle="tab" href="#menu_staking" style=" margin-left: 15px;">  <img  id="image-service" src="images/icons/staking_icon.SVG" alt="home" width="35"> </a>

       <a data-toggle="tab" href="#menu_info_sock" style=" margin-left: 15px;">  <img  id="image-service" src="images/icons/config_icon.SVG" alt="home" width="35"> </a>
             
       <p id ="NFTUsernames-count" style=" margin-left: 15px;  font-size: 24px;"> </p>  

       
       
       
</ul>



 <style>
  /* Estilos para los caracteres @ y # */
span.atSymbol {
    color: blue; /* Color azul para @ */
}

span.hashtag {
    color: red; /* Color rojo para # */
}

/* Estilos para la imagen o el video */
#mediaContent img,
#mediaContent video {
    max-width: 100%; /* Ajuste para el ancho */
    height: auto;
}
</style>




<div id="estado-servidor_msg"></div>

<div style="display: flex; align-items: center; justify-content: space-around;  padding: 0px; border-radius: 0px;">

  <!-- Saldo MATIC -->
  <div style="display: flex; align-items: center;">
    <div id="saldo_ETH" style="color: white; margin-right: 5px;">0</div>
    <img src="images/icons/matic_coin.SVG" alt="MATIC" width="20" style="margin-right: 8px;">    
    <div id="saldo_USD" style="color: white;">$0.00</div>
  </div>

  <!-- Saldo SOCK -->
  <div style="display: flex; align-items: center;">
    <img src="images/icons/sock_coin.SVG" alt="SOCK" width="20" style="margin-right: 8px;">
    <div id="saldo_CAW" style="color: black;">0</div>
  </div>

  <!-- Bot√≥n de actualizaci√≥n -->
  <div>
    <a href="#" id="btn-obtener-saldo" onclick="obtenerSaldo_POL_SOCK()" style="color: black; text-decoration: none;">
      <span class="glyphicon glyphicon-refresh" style="margin-right: 5px;"></span>
      <span></span>
    </a>
  </div>

</div>

 <div class="tab-content" style="border: 0px solid dodgerblue; border-radius: 20px; background:white;">
 


    <div id="home" class="tab-pane fade in active" >
         <br>
                   
         <center><div id="loadingAnimation-principal" style="display: none;">
                    
                    <br>
                    <div class="spinner"></div> 
                    <br>
                              
         </div>  </center> 

         <div id="recent-home-publications-container"></div> 
         <div id="home-publications-container"></div>       
          
         <div class="user-following-publication-container"  >
         </div> 
        
        <br>
         <button id="verMasBtn" class="btn" style="
            margin: 20px auto;
            display: block;
            font-size: 18px;
            border-radius: 20px;
            background-color: dodgerblue;
            color: white;
            padding: 10px 20px;
            border: none;
            text-align: center;
        ">
    Ver m√°s publicaciones
</button>

      <br>

    </div>
<!--#################################################-->    





    <div id="menu1" class="tab-pane fade">
   <!--****************************************************-->
   <!--****************************************************-->
                 
                
          <div class="container-fluid" style="display: flex; justify-content: space-between; margin-top: 10px; margin-bottom: 10px">
               
                

              <a class="underlineHover" onclick="restore_button_update()" href="#" data-toggle="modal" data-target="#myModalprofile">
                <span class="glyphicon glyphicon-user" style="color: black; font-size: 24px; vertical-align: middle;"></span>
              </a>

                <a class="underlineHover" onclick="loadProfile()" style="display: inline-block;"><span class="glyphicon glyphicon-pencil" style="color: black; font-size: 24px;"></a>

               <a class="underlineHover" onclick="mostrarModal_si_no('¬øEliminar Perfil?', clear_NFTUsername_profile,hacer_nada)" style="display: inline-block;"><span class="glyphicon glyphicon-trash" style="color: black; font-size: 24px;"></a>   
                      
           </div>

           <div id="nft-username-profile"></div>
           <br> 
          
                     
           <center>
          
        
            <button id="btn-mostrar-mis-publicaciones" onclick="mostrar_mis_publicaciones()" class="btn" style="
            margin: 20px auto;
            display: block;
            font-size: 18px;
            border-radius: 20px;
            background-color: dodgerblue;
            color: white;
            padding: 10px 20px;
            border: none;
            text-align: center;
        ">
    Ver mis publicaciones
</button> 




            </center>
            <div id="my-publications-container"></div>
            
             
              <br>
            

       
   </div>  




    <div id="menu2" class="tab-pane fade">    
       <!-- <div class="user-publication-container">
             <a href="games/asteroides/asteroides.html" target="_blank">Jugar Asteroides</a>            
        </div> -->

         <br>
          
             <center><h3>You Publications</h3></center>
              <br>
               <br>

        
         
    </div>

  <div id="menu_buscar" class="tab-pane fade">    
         <br>
         <center>
         <div class="input-group" style="display: flex; width: 90%; align-items: center; gap: 10px; margin-bottom: 20px;">
          
               
                <input type="text" id="text-address-wallet" class="form-control"
                       placeholder="Search 0x.. or NftUsername"
                       style="border: 2px solid black; border-radius: 20px; height: 40px; flex: 1;">

                <button id="btn-find-nft" class="btn btn-default"
                        onclick="findNftWallet('user')"
                        style="background-color: dodgerblue; color: white; border: 2px solid blue; border-radius: 20px; height: 40px;">
                  <span class="glyphicon glyphicon-search"></span>
                </button>              
         </div>

      

       <div class="input-group" style="display: flex; width: 90%; align-items: center; gap: 10px; margin-bottom: 20px;">
            
            <button id="btn-find-followin"  onclick="findNftWallet('following')"style="background-color: dodgerblue ; color: white; border: 2px solid blue; border-radius: 20px; height: 40px;">Siguiendo</button> 

           <button id="btn-find-followers"  onclick="findNftWallet('followers')"style="background-color: dodgerblue; color: white; border: 2px solid blue; border-radius: 20px; height: 40px;">Seguidores</button> 

           <button id="btn-find-messages"  onclick="findNftWallet('messages')"style="background-color: dodgerblue; color: white; border: 2px solid blue; border-radius: 20px; height: 40px;"><span class="glyphicon glyphicon-envelope"></span></button> 

       </div>


       </center>

          

         <h4><div id="nft-username-list" style="border: 2px solid white"></div></h4>

         <h4><div id="nft-username-list-for-you"></div></h4>
          
               

        
         
    </div>



    


    <!--/////////////////////////////////////////////////////////////-->
    <!--/////////////////////////////////////////////////////////////-->
    <div id="menu_mensaje" class="tab-pane fade">
      
      <div class="container-fluid"> 
          <h4><div id="nft-username-list-direct-message"></div></h4>   
          <br>
           
             <center><h3>Direct Messages</h3></center>
              <br>
               <br>
      </div>
    </div>
    <!--/////////////////////////////////////////////////////////////-->
     <!--/////////////////////////////////////////////////////////////-->
    <!--/////////////////////////////////////////////////////////////-->
    <div id="menu_play" class="tab-pane fade">
      
      <div class="container-fluid"> 
          <h4><div id="nft-username-list-direct-message"></div></h4>   
          
             <!-- Bot√≥n opcional para 2mcargar el juego -->
         
         <div style="display: flex; gap: 5px; justify-content: center; align-items: center; margin: 10px;">
    <!-- Bot√≥n 1 -->
    <button onclick="loadGame()" style="display: flex; align-items: center;  background-color: white; color: white; border: none; border-radius: 10px; cursor: pointer;">
        <img src="games/cartaMayor/images/majorcart.SVG" alt="Icono" style="width: 100px;">
        
    </button>
    <!-- Bot√≥n 2 -->
    <button onclick="loadGame_sockWar()" style="display: flex; align-items: center;  font-size: 16px; background-color: white; color: white; border: none; border-radius: 10px; cursor: pointer;">
        <img src="games/sockWar/images/sockwar.SVG" alt="Icono" style="width: 100px;">
        
    </button>

    <button onclick="loadGame_revolutions()" style="display: flex; align-items: center;  font-size: 16px; background-color: white; color: white; border: none; border-radius: 10px; cursor: pointer;">
        <img src="games/sockRevolutions/images/sockRevolutions.svg" alt="Icono" style="width: 100px;">
        
    </button>
</div>

        
          <div id="gameContainer"></div>        
              
             
      </div>
    </div>
  
    <!--/////////////////////////////////////////////////////////////-->
 <!--/////////////////////////////////////////////////////////////-->
    <!--/////////////////////////////////////////////////////////////-->
  <!--   <div id="menu_play_to_earn" class="tab-pane fade">
      
      <div class="container-fluid"> 
          <h4><div id="nft-username-list-direct-message"></div></h4>   
          <br>
           
             <center><h3>Game play to earn and Bets</h3></center>
              <br>
               <br>
      </div>
    </div>
-->

<!--/////////////////////////////////////////////////////////////-->
    <!--/////////////////////////////////////////////////////////////-->
    <div id="menu_transfer" class="tab-pane fade">
          
          <br>
          <center><h3><p>Swap and transfer token</p></h3></center> 
          
          <br>
          <br>
           
    
    </div>     
<!--/////////////////////////////////////////////////////////////-->
    <!--/////////////////////////////////////////////////////////////-->

    <div id="menu_staking" class="tab-pane fade" >
       
         <div class="container-fluid" style = "width:80%; align-items: center;">
                       </div>

          <br>   
              <center>  <h3>Staking Pool</h3> </center>                   
                  <br>
                 
                 <br>  
          
    </div> 

    
          
                   
   
 <!--/////////////////////////////////////////////////////////////-->
 <!--/////////////////////////////////////////////////////////////-->
 <div id="menu_info_sock" class="tab-pane fade">      
     
                <br>
                <center><h3><p>Info Sock Puppet</p></h3></center>
                <br>       
                <div id="info-sock"></div>  
                          
 </div>
 <!--/////////////////////////////////////////////////////////////-->
 <!--/////////////////////////////////////////////////////////////-->


<!--/////////////////////////////////////////////////////////////-->
 <!--/////////////////////////////////////////////////////////////-->
 <div id="menu_comprar_criptos" class="tab-pane fade">      
     
                <br>
                <center><h3><p>Usar Bitcoin para obtener SOCK</p></h3></center>
                <br>
                <p>Envia Bitcoin a esta direccion para que sean transformados en SOCK</p>


                <div id="recargar-con-btc"></div> 
           
              
                          
 </div>
 <!--/////////////////////////////////////////////////////////////-->
 <!--/////////////////////////////////////////////////////////////-->



<!--/////////////////////////////////////////////////////////////-->
 <!--/////////////////////////////////////////////////////////////-->
 <div id="menu_hacer_publicacion" class="tab-pane fade">      
     
              <br>
              <center>
              <div id="loadingAnimation-post-publication" style="display: none;">
                        <div class="spinner"></div>              
              </div>
            </center>
              

              <center>  <div id="menu-publicar"></div></center> 
           
              
                          
 </div>
 <!--/////////////////////////////////////////////////////////////-->
 <!--/////////////////////////////////////////////////////////////-->
    

  </div>

                    
  
     





                </div>
<br>

            
<style>
.col-sm-4 {
    position: -webkit-sticky;
    position: sticky;
    top: 0;
    height: 100vh; /* Establece la altura m√°xima del contenido pegajoso */
    overflow-y: auto; /* Agrega un desplazamiento vertical si es necesario */
    /* Otros estilos para la columna sm-3 */
}

</style>



            <div class="col-sm-4">


              
              <a data-toggle="collapse" data-target="#view_log_details" style="cursor: pointer;">
                  <span class="glyphicon glyphicon-chevron-down"></span>
              </a>
               
              <div id="view_log_details" class="collapse">                    
              
                  <div class="well" style="border: 4px solid dodgerblue;  border-radius: 20px;">
                   
                    <div id="success-message"></div>                  
                          
                  </div>

                  <div class="well" style="border: 4px solid dodgerblue;  border-radius: 20px;">
                   
                    <div id="error-message"></div>  
                          
                  </div>

              </div>                               
                                                 
                            
                                         
                </div>               



            </div>

            

            
         <!--   </div>  -->
    <!--   </div>   -->

<!-- ############## ventana emergente Publicaciones ###########################-->
  
<!-- Modal -->
<div class="modal fade" id="myModal_comentarios" role="dialog">    
    <div class="modal-dialog">
        <!-- Modal content -->
        <div class="modal-content" style="background: linear-gradient(180deg, dodgerblue,white);">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                 
            </div>
           
            <div class="modal-body" style="display: flex; align-items: flex-start; gap: 10px;">

           
                <div id="comentarios-container" style="flex: 1; padding: 10px; border-radius: 10px;"></div>                                     
            
            </div>      

                   
                          

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>



<!-- ############## ventana emergente Publicaciones ###########################-->
  
<!-- Modal -->
<div class="modal fade" id="myModal_publication" role="dialog">    
    <div class="modal-dialog">
        <!-- Modal content -->
        <div class="modal-content" style="background: linear-gradient(180deg, dodgerblue, black);">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <center>
                <!-- <div id="loadingAnimation-post-publication" style="display: none;">
                        <div class="spinner"></div>              
                 </div> --> 
            </center>    
            </div>
           
            <div class="modal-body" style="display: flex; align-items: flex-start; gap: 10px;">

           
                <div id="publication-post-container" style="flex: 1; padding: 10px; border-radius: 10px;"></div>                                     
            
            </div>      

                   
                          

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>







<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->


<!-- ############## ventana emergente Mintear NFTusernameCAW ###########################-->
<!-- #################################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->


  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content" style="background: linear-gradient(180deg, dodgerblue, black);">
        <div class="modal-header">
           <button type="button" class="close" data-dismiss="modal">&times;</button>
          <div class="profile-form">
            <center>
              <h3>Crear Usuario</h3>
            </center>
          </div>
        </div>
        <div class="modal-body">


       

     <center>         

          <!--*******************************************************   -->


    <style>
        #image-container {
            position: relative;
            width: 250px; /* Ajusta seg√∫n sea necesario */
            height: 250px; /* Ajusta seg√∫n sea necesario */
            border: 8px solid white;
            /*border: 1px solid #ccc; /* Opcional, solo para visualizar el contenedor */
        }
        .layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
    </style>
 
    <div class="img-circle" id="image-container" onclick="loadImages()"> <font color="white" size="5">Presione / imagen de perfil</font></div>
    <p id="codeimageHexa" style ="display: none">    </p>
    <br>
    

 
<!-- *******************************************************-->

            <h3><font color="white"><p id="Minted_username"></p></font></h3>
            <h4><font color="orange"><p id="Error_Minted_username"></p></font></h4>
      
            <input type="text" id="text-mintear-nft" placeholder=" Nombre de Usuario " required required style="border: 2px solid black; border-radius: 20px; width: 75%; margin-bottom: 10px; height: 40px;  font-size: 24px;"/> 
            <br>           
            <br>

<!--         <button id="btn-verify-nft" style="background-color: black; color: white; border:        2px solid lime; border-radius: 20px; height: 40px;">check username before</button>
-->
            <button id="btn-mintear-nft" style="background-color: black; color: white; border: 2px solid dodgerblue; border-radius: 20px; height: 40px; "><font color="white" size="5">Crear Usuario</font></button>
          

          <div style="display: flex; align-items: center; justify-content: flex-start; gap: 0; color: dodgerblue;">
             <h4 style="margin: 0;">POL son Requeridos :</h4>
             <p id="mount-minteo" style="margin: 0;"></p>
          </div>

          </center>


         <center>
             <div id="loadingAnimation-mint" style="display: none;">
               <div class="spinner"></div>              
             </div>
        </center>




          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>  

<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->

<!-- ############## ventana emergente crear un perfil ###########################-->
<!-- #################################################################################-->

  <!-- Modal -->
  <div class="modal fade" id="myModalprofile" role="dialog">
    <div class="modal-dialog">    
      <!-- Modal content-->
      <div class="modal-content" style="background: linear-gradient(180deg, dodgerblue, black);">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
                     
        <div class="modal-body">    
        
         <div class="profile-form">
           <center> <h2><font color="black ">User Profile</h2></font> </center>     

           <center>
    <div style="width: 80%;">
        <input type="text" id="nombre" placeholder=" Nombre" required style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 40px;">                      
        <textarea id="bio" placeholder=" Biograf√≠a" required style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 120px;"></textarea>
        <input type="text" id="ubicacion" placeholder=" Ubicaci√≥n" style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 40px;">
        <input type="text" id="pagina-web" placeholder=" P√°gina Web" style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 40px;">
        <input type="text" id="foto-perfil" placeholder=" Link to profile picture" style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 40px;">
        <input type="text" id="foto-portada" placeholder=" Link to cover picture" style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 40px;">
    </div>
</center>
             
               <br>  

 <center><div style="display: flex; width: 80%;">
    <select id="selector_key1" class="form-control" placeholder="select key" style="border: 2px solid black; border-radius: 20px;"></select>
    <select id="selector_key2" class="form-control" placeholder="select key" style="border: 2px solid black; border-radius: 20px;"></select>
    <select id="selector_key3" class="form-control" placeholder="select key" style="border: 2px solid black; border-radius: 20px;"></select>    
</div></center>

<center> <div style="display: flex; width: 80%;">
       
</div></center>

<br>


<center>
       
       <div id="loadingAnimation-profile" style="display: none;">
              <div class="spinner"></div>               
       </div>

   </center> 



               <br> 
          <center>      
              
              <button id="btn-create-profile" onclick="create_NFTUsername_profile(0)"style="background-color: black; color: white; border: 2px solid dodgerblue; border-radius: 20px; height: 40px;"> Guardar Perfil </button>


          </center> 

       </div>

        </div>
       
                      
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>      
    </div>
  </div>  


<!-- ############## ventana emergente QR recibir tokesn ###########################-->
<!-- #################################################################################-->

  <!-- Modal -->
 <!-- Modal -->
<div class="modal fade" id="myModalQR" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content" style="background: linear-gradient(180deg, dodgerblue, black);">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <center><h5><a href="/pagina_principal/0/"><font color="black"> My Public Address   </a></font></h5></center>
         <center><div id="addres-wallet-QR"></div></center>

       
      </div>
      <!--<div class="modal-body">       
      </div>-->
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<!-- #####################################################################-->
<!-- #####################################################################-->


<!-- ############## ventana emergente enviar tokesn ###########################-->
<!-- #################################################################################-->

  <!-- Modal -->
 <!-- Modal -->
<div class="modal fade" id="myModalEnviarTokens" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content" style="background: linear-gradient(180deg, dodgerblue, black);">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <center><h3><p>Enviar</p></h3></center>

            <center> 
            <div id="loadingAnimation-sendSocks" style="display: none;">
              <div class="spinner"></div>               
            </div>

             <div id="loadingAnimation-sendPol" style="display: none;">
              <div class="spinner"></div>               
            </div>
            </center>
             
             <center><div id="modal-enviar-tokens"></div></center>

                        

       
      </div>
      <!--<div class="modal-body">       
      </div>-->
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

<!-- #####################################################################-->
<!-- #####################################################################-->




<!-- Modal para Compra de NFT -->
<!-- Modal para Compra de NFT -->

  <div class="modal fade" id="buyNftModal" role="dialog">
    <div class="modal-dialog">
      <!-- Contenido del modal -->
      <div class="modal-content" style="background: linear-gradient(180deg, dodgerblue, black);">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <center><h5><font color="black">Comprar Nombre de usuario</font></h5></center>
        </div>
        <div class="modal-body">
          <center>
            <h6><font color="black">Comprar Nombre de usuario :</font></h6>           
                       
            <div id="menu-to-buy"></div>
                    
          </center>
        </div>
        <div class="modal-footer">

         
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>




<!-- Modal para ver el perfil de un NFTUsername -->


  <div class="modal fade" id="UsernameProfileModal" role="dialog">
    <div class="modal-dialog">
      <!-- Contenido del modal -->
      <div class="modal-content" style="background: linear-gradient(180deg, dodgerblue, black);">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
         
        </div>
        <div class="modal-body">
          <center>                                  
               
               <div id="modal_nft-username-profile"></div>
               <br>
               <div id="modal_publication-nftusername"></div>

                   
          </center>
        </div>
        <div class="modal-footer">

         
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>





<!-- Modal predefinido en HTML -->
<div class="modal fade" id="sellNFTModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalLabel">Vender NFT</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- Aqu√≠ va el contenido din√°mico -->
        <p>Precio: <span id="nftPrice"></span></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        
      </div>
    </div>
  </div>
</div>

<!-- ############## ventana emergente SI NO ###########################-->
<!-- #################################################################################-->
  <!-- Modal -->
  <div class="modal fade" id="myModal_Si_No" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content -->
      <div class="modal-content" style="background: linear-gradient(180deg, white, white);">
        <div class="modal-body" style="display: flex; align-items: flex-start; gap: 10px;">
          <div id="user-question" style="flex: 1; padding: 10px; border-radius: 10px;"></div> 
          
          </div>      
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" id="modal-btn-no" data-dismiss="modal">No</button>
          <button type="button" class="btn btn-success" id="modal-btn-yes">S√≠</button>
        </div>
      </div>
    </div>
  </div>
<!-- #################################################################################-->

<!-- Modal MOSTRAR POST COMPLETO E IMAGEN -->

  <div class="modal fade" id="myModal_full_publication" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content -->
      <div class="modal-content" style="background: linear-gradient(180deg, white, white);">
        <div class="modal-body" style="display: flex; align-items: flex-start; gap: 10px;">
          <div id="display-full-publication" style="flex: 1; padding: 10px; border-radius: 10px;"></div> 
          
          </div>      
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" id="modal-btn-cerrar" data-dismiss="modal">Cerrar</button>
         
        </div>
      </div>
    </div>
  </div>
<!-- #################################################################################-->






 
<!-- Puedes agregar m√°s elementos seg√∫n sea necesario -->
  
   
<script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
<!-- Archivo JavaScript para cargar contenido din√°mico del juego carta Mayor-->
    <script src="games/cartaMayor/loadGameCartas.js"></script>
    <script src="games/cartaMayor/scriptCartas.js"></script>
    
    <script src="games/sockWar/loadGameSockWar.js"></script>
    <script src="games/sockWar/scriptSockWar.js"></script>

    <script src="games/sockRevolutions/loadGameRevolutions.js"></script>
     

<style>
.spinner {
  border: 5px solid rgba(0, 0, 0, 0.1);
  border-left: 5px solid dodgerblue; /* Amarillo */
  border-radius: 50%;
  width: 75px;
  height: 75px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>



<script>
async function verificarServidor() {
  fetch('https://api.thesocks.net/is-alive/')
    .then(response => {
      if (!response.ok) throw new Error("Respuesta no OK");
      return response.json();
    })
    .then(data => {
      if (data.alive !== true) throw new Error("Servidor no respondi√≥ true");
      // Servidor est√° vivo, no hacer nada o puedes actualizar el estado visualmente
    })
    .catch(error => {
      const estadoDiv = document.getElementById('estado-servidor');
      estadoDiv.innerHTML = '<img src="images/icons/disconnect_icon.svg" alt="Algunas funciones est√°n temporalmente fuera de servicio " width="55px"/>';

      const estadoDiv2 = document.getElementById('estado-servidor_msg');
      estadoDiv2.innerHTML = '<center><h5><p><font color="red">Algunas funciones est√°n temporalmente fuera de servicio </font></p></h5></center>';


    });
}

</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        let menu = document.getElementById("menu");
        let menuBtn = document.getElementById("menuBtn");

        let touchStartX = 0;
        let touchEndX = 0;
        let mouseStartX = 0;
        let mouseEndX = 0;

        // Funci√≥n para abrir/cerrar men√∫
        function toggleMenu(open) {
            if (open) {
                menu.classList.add("show");
            } else {
                menu.classList.remove("show");
            }
        }

        // Evento para bot√≥n de men√∫ en PC
        menuBtn.addEventListener("click", function () {
            menu.classList.toggle("show");
        });

        // Eventos t√°ctiles para m√≥viles
        document.body.addEventListener("touchstart", function (event) {
            touchStartX = event.touches[0].clientX;
        });

        document.body.addEventListener("touchmove", function (event) {
            touchEndX = event.touches[0].clientX;
        });

        document.body.addEventListener("touchend", function () {
            if (touchStartX < 50 && touchEndX > touchStartX + 50) {
                toggleMenu(true);
            } else if (touchStartX > 150 && touchEndX < touchStartX - 50) {
                toggleMenu(false);
            }
        });

        // Eventos de mouse para PC (arrastre)
        document.body.addEventListener("mousedown", function (event) {
            mouseStartX = event.clientX;
        });

        document.body.addEventListener("mouseup", function (event) {
            mouseEndX = event.clientX;

            //if (mouseStartX < 50 && mouseEndX > mouseStartX + 50) {
            //    toggleMenu(true);
            //} else if (mouseStartX > 150 && mouseEndX < mouseStartX - 50) {
             //   toggleMenu(false);
            //}
        });
    });
</script>

<script>
    // Definir las palabras clave

    function abrirModalPublicacion() {
    createPublicationElements();
        //('#myModal_publication').modal('show');
}
     
    const palabras_gustos=['Art and Creativity','Sports and Physical Activities','Entertainment and Media','Culture and Society','Nature and Outdoor Activities','Science and Technology','Gastronomy','Personal Development','Volunteering and Social Causes'];

    const palabras_actitudinales=['Optimism and Positivity','Introspection and Self-Awareness','Ambition and Drive','Empathy and Compassion','Adaptability and Open-Mindedness','Pragmatism and Logic','Creativity and Innovation','Collaboration and Sociability','Resilience and Perseverance'];

    const palabras_coductuales=['Routine and Organization','Risk and Adventure','Helping and Support','Leadership and Authority','Learning and Growth','Conflict and Resolution','Expressiveness and Communication','Resourcefulness and Ingenuity','Collaboration and Teamwork'];

    // Funci√≥n para llenar los selects
    function llenarSelects() {
      const vector_palabras=[palabras_gustos,palabras_actitudinales,palabras_coductuales];

      for (let i = 1; i <= 3; i++) {
        // Obtener el select actual
        const select = document.getElementById(`selector_key${i}`);
        // Limpiar cualquier opci√≥n existente
        select.innerHTML = '';
        // Agregar las opciones
        vector_palabras[i-1].forEach(palabra => {
          const opcion = document.createElement('option');
          opcion.value = palabra;
          opcion.text = palabra;
          select.add(opcion);
        });
      


      }
    

    }

    // Llenar los selects al cargar la p√°gina
    llenarSelects();
  </script>






<script> 

const CAW_tokenABI = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"TokensBurned","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"contractAddress","type":"address"}],"name":"authorizeContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"user","type":"address"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"contractAddress","type":"address"}],"name":"isAuthorizedContract","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"tokenAddress","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"recoverERC20","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"contractAddress","type":"address"}],"name":"revokeAuthorization","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}];

const tokenContractAddress = '0x8f78976a0fdf8f66ad81bb7d7c9b8d4a695022e3';//Sock -polygon  
let tokenContract;
     



const NFT_ContractABI=[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"FundsWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"username","type":"string"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"NFTForSale","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"string","name":"username","type":"string"}],"name":"NFTMinted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"username","type":"string"}],"name":"NFTSaleCancelled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"username","type":"string"},{"indexed":true,"internalType":"address","name":"buyer","type":"address"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"NFTSold","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"username","type":"string"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"NFTTransferred","type":"event"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"buyNFT","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"cancelNFTSale","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getEtherBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"getHashFromUsername","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"walletAddress","type":"address"}],"name":"getMintedUsernames","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getNFTInfoById","outputs":[{"components":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"string","name":"username","type":"string"},{"internalType":"bool","name":"isMinted","type":"bool"},{"internalType":"bool","name":"isForSale","type":"bool"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"bytes32","name":"usernameHash","type":"bytes32"},{"internalType":"bytes32","name":"imagecodeHexa","type":"bytes32"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"internalType":"struct NFTUsernameContract.NFT","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"getNFTInfoByUsername","outputs":[{"components":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"string","name":"username","type":"string"},{"internalType":"bool","name":"isMinted","type":"bool"},{"internalType":"bool","name":"isForSale","type":"bool"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"bytes32","name":"usernameHash","type":"bytes32"},{"internalType":"bytes32","name":"imagecodeHexa","type":"bytes32"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"internalType":"struct NFTUsernameContract.NFT","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"getNFTOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"getNFTTokenId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"getNFTTokenTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"walletAddress","type":"address"}],"name":"getNFTUsername","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getNftIsForSaleCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalMintedNFTs","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getUsernameByTokenId","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"hash","type":"bytes32"}],"name":"getUsernameFromHash","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"startIndex","type":"uint256"},{"internalType":"uint256","name":"endIndex","type":"uint256"}],"name":"getUsernamesInRange","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"getimagecodeHexaFromUsername","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"isCallerNFTOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"isMinted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"isNFTForSale","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"nftOwner","type":"address"},{"internalType":"string","name":"nftUsername","type":"string"},{"internalType":"address","name":"caller","type":"address"}],"name":"isNFTOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"},{"internalType":"bytes32","name":"imagecodeHexa","type":"bytes32"}],"name":"mintNFT","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"}],"name":"sellNFT","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"string","name":"username","type":"string"}],"name":"transferNFT","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}];
 
const nftContractAddress = '0xac6f27b3b55b96d7f6bfc4b905257bed6758922e';//polygon verificado 
let nftUsernameContract;





const Bet_ContractABI = [{"inputs":[{"internalType":"address","name":"sockTokenAddress","type":"address"},{"internalType":"address","name":"nftContractAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"OwnableInvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"OwnableUnauthorizedAccount","type":"error"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newBetAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"newRewardAmount","type":"uint256"}],"name":"BetAndRewardAmountUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"betId","type":"uint256"},{"indexed":true,"internalType":"address","name":"player","type":"address"},{"indexed":false,"internalType":"bytes32","name":"nftUsernameHash","type":"bytes32"},{"indexed":false,"internalType":"uint256","name":"betAmount","type":"uint256"}],"name":"BetCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"betId","type":"uint256"},{"indexed":true,"internalType":"address","name":"opponent","type":"address"},{"indexed":false,"internalType":"bytes32","name":"nftUsernameHash","type":"bytes32"}],"name":"BetJoined","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"betId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"result","type":"uint256"}],"name":"BetResolved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"betAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"betCounter","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"bets","outputs":[{"internalType":"address","name":"player","type":"address"},{"internalType":"bytes32","name":"nftUsernameHash","type":"bytes32"},{"internalType":"bytes","name":"encryptedMove","type":"bytes"},{"internalType":"uint256","name":"betAmount","type":"uint256"},{"internalType":"bool","name":"resolved","type":"bool"},{"internalType":"address","name":"opponent","type":"address"},{"internalType":"uint256","name":"result","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"nftUsernameHash","type":"bytes32"},{"internalType":"bytes","name":"encryptedMove","type":"bytes"}],"name":"createBet","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"betId","type":"uint256"}],"name":"getBetHistory","outputs":[{"components":[{"internalType":"address","name":"player","type":"address"},{"internalType":"bytes32","name":"nftUsernameHash","type":"bytes32"},{"internalType":"bytes","name":"encryptedMove","type":"bytes"},{"internalType":"uint256","name":"betAmount","type":"uint256"},{"internalType":"bool","name":"resolved","type":"bool"},{"internalType":"address","name":"opponent","type":"address"},{"internalType":"uint256","name":"result","type":"uint256"}],"internalType":"struct BettingContract.Bet","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getContractBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"nftUsernameHash","type":"bytes32"}],"name":"getPlayerBetHistory","outputs":[{"components":[{"internalType":"address","name":"player","type":"address"},{"internalType":"bytes32","name":"nftUsernameHash","type":"bytes32"},{"internalType":"bytes","name":"encryptedMove","type":"bytes"},{"internalType":"uint256","name":"betAmount","type":"uint256"},{"internalType":"bool","name":"resolved","type":"bool"},{"internalType":"address","name":"opponent","type":"address"},{"internalType":"uint256","name":"result","type":"uint256"}],"internalType":"struct BettingContract.Bet[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"hasOpenBet","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"hasOpenBetStatus","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"playerBets","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"rewardAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"newBetAmount","type":"uint256"},{"internalType":"uint256","name":"newRewardAmount","type":"uint256"}],"name":"updateBetAndRewardAmount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdrawTokens","outputs":[],"stateMutability":"nonpayable","type":"function"}];

const betContractAddress = '0x37C306540D620c78f90740810B92b839f2293fF9';//polygon verificado  
let betContract;




const Transfer_ContractABI=[{"constant":false,"inputs":[{"name":"senderNFTUsername","type":"string"},{"name":"receiverNFTUsername","type":"string"},{"name":"userTimestamp","type":"uint256"},{"name":"signatureToUser","type":"bytes32"},{"name":"typeAction","type":"string"}],"name":"actionTransfer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"nftUsername","type":"string"}],"name":"checkNFTOwnership","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"cawTokenAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"cawContractStaking","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"nftContractAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"}],"name":"isNFTMinted","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getNFTUsername","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"cawTokenAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"user","type":"address"}],"name":"getCawBalance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}];

const transferContractAddress = '0x9582dacf43aa2bf143ac909faa5a718cbca92333';//polygon





const Profile_ContractABI =[{"inputs":[{"internalType":"address","name":"nftContractAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"OwnableInvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"OwnableUnauthorizedAccount","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"nftUsername","type":"string"},{"indexed":false,"internalType":"string","name":"json","type":"string"},{"indexed":false,"internalType":"string[3]","name":"tags","type":"string[3]"}],"name":"ProfileCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"nftUsername","type":"string"}],"name":"ProfileDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"nftUsername","type":"string"},{"indexed":false,"internalType":"string","name":"json","type":"string"},{"indexed":false,"internalType":"string[3]","name":"tags","type":"string[3]"}],"name":"ProfileUpdated","type":"event"},{"inputs":[{"internalType":"string","name":"username","type":"string"},{"internalType":"string","name":"json","type":"string"},{"internalType":"string[3]","name":"tags","type":"string[3]"}],"name":"createProfile","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"deleteProfile","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"getProfileByUsername","outputs":[{"components":[{"internalType":"string","name":"nftUsername","type":"string"},{"internalType":"string","name":"json","type":"string"},{"internalType":"string[3]","name":"tags","type":"string[3]"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"internalType":"struct UserProfileContract.Profile","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getProfileCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"tag","type":"string"},{"internalType":"uint256","name":"limit","type":"uint256"}],"name":"getProfilesByActitudTag","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"tag","type":"string"},{"internalType":"uint256","name":"limit","type":"uint256"}],"name":"getProfilesByConductaTag","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"tag","type":"string"},{"internalType":"uint256","name":"limit","type":"uint256"}],"name":"getProfilesByGustoTag","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"profileCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"},{"internalType":"string","name":"json","type":"string"},{"internalType":"string[3]","name":"tags","type":"string[3]"}],"name":"updateProfile","outputs":[],"stateMutability":"nonpayable","type":"function"}];





const profileContractAddress = '0x486CbA957Ed26A3AFe31ba00df5Dcc64AF4d3274'; //polygon
let profileContract;


const FollowControl_ContractABI =[{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"address","name":"_sockToken","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newFollowFee","type":"uint256"}],"name":"FollowFeeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"follower","type":"string"},{"indexed":true,"internalType":"string","name":"following","type":"string"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"Followed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"newNFTUsernameContract","type":"address"}],"name":"NFTUsernameContractUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"newStakingContract","type":"address"}],"name":"StakingContractUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"follower","type":"string"},{"indexed":true,"internalType":"string","name":"following","type":"string"}],"name":"Unfollowed","type":"event"},{"inputs":[{"internalType":"string","name":"follower","type":"string"},{"internalType":"string","name":"following","type":"string"}],"name":"follow","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"followFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"follower","type":"string"},{"internalType":"string","name":"following","type":"string"}],"name":"getFollowStatus","outputs":[{"internalType":"bool","name":"isUserFollowing","type":"bool"},{"internalType":"uint256","name":"followTimestamp","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"follower","type":"string"},{"internalType":"string","name":"following","type":"string"}],"name":"getFollowTimestamp","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"getFollowerCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"getFollowersList","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"getFollowingCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"getFollowingList","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"follower","type":"string"},{"internalType":"string","name":"following","type":"string"}],"name":"isFollowedBy","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"follower","type":"string"},{"internalType":"string","name":"following","type":"string"}],"name":"isFollowing","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"sockToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"stakingContract","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"follower","type":"string"},{"internalType":"string","name":"following","type":"string"}],"name":"unfollow","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_followFee","type":"uint256"}],"name":"updateFollowFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"}],"name":"updateNFTUsernameContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_stakingContract","type":"address"}],"name":"updateStakingContract","outputs":[],"stateMutability":"nonpayable","type":"function"}];


const followControlContractAddress = "0xb2792ddb0807e76ffb024055421cf37015bd880e";//polygon follow unfollow contract
let followControlContract;




const Publisher_ContractABI=[{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"address","name":"_sockToken","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"newNFTUsernameContract","type":"address"}],"name":"NFTUsernameContractUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":true,"internalType":"string","name":"nftUsername","type":"string"},{"indexed":false,"internalType":"string","name":"content","type":"string"},{"indexed":false,"internalType":"enum PostControl.PublicationType","name":"publicationType","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"parentPublicationId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"PublicationCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"publicationId","type":"uint256"},{"indexed":true,"internalType":"string","name":"nftUsername","type":"string"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"PublicationDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"publicationId","type":"uint256"},{"indexed":true,"internalType":"string","name":"nftUsername","type":"string"},{"indexed":false,"internalType":"string","name":"content","type":"string"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"PublicationEdited","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newFollowFee","type":"uint256"}],"name":"PublicationFeeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"newStakingContract","type":"address"}],"name":"StakingContractUpdated","type":"event"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"},{"internalType":"string","name":"content","type":"string"},{"internalType":"string","name":"jsonMetadata","type":"string"},{"internalType":"enum PostControl.PublicationType","name":"publicationType","type":"uint8"},{"internalType":"uint256","name":"parentPublicationId","type":"uint256"},{"internalType":"uint256","name":"threadOrder","type":"uint256"}],"name":"createPublication","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"publicationId","type":"uint256"}],"name":"deletePublication","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"publicationId","type":"uint256"},{"internalType":"string","name":"content","type":"string"},{"internalType":"string","name":"jsonMetadata","type":"string"}],"name":"editPublication","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"getMainPostsByNFTUsername","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"parentId","type":"uint256"}],"name":"getMainposts","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"publicationId","type":"uint256"}],"name":"getPublication","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"content","type":"string"},{"internalType":"string","name":"jsonMetadata","type":"string"},{"internalType":"string","name":"nftUsername","type":"string"},{"internalType":"enum PostControl.PublicationType","name":"publicationType","type":"uint8"},{"internalType":"uint256","name":"parentPublicationId","type":"uint256"},{"internalType":"uint256","name":"threadOrder","type":"uint256"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"internalType":"struct PostControl.Publication","name":"","type":"tuple"},{"internalType":"uint256[]","name":"threads","type":"uint256[]"},{"internalType":"uint256[]","name":"responses","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"},{"internalType":"uint256","name":"publicationId","type":"uint256"}],"name":"getPublicationByNFTUsername","outputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"content","type":"string"},{"internalType":"string","name":"jsonMetadata","type":"string"},{"internalType":"string","name":"nftUsername","type":"string"},{"internalType":"enum PostControl.PublicationType","name":"publicationType","type":"uint8"},{"internalType":"uint256","name":"parentPublicationId","type":"uint256"},{"internalType":"uint256","name":"threadOrder","type":"uint256"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"internalType":"struct PostControl.Publication","name":"","type":"tuple"},{"internalType":"uint256[]","name":"threads","type":"uint256[]"},{"internalType":"uint256[]","name":"responses","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"parentId","type":"uint256"}],"name":"getResponses","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"getResponsesByNFTUsername","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"parentId","type":"uint256"}],"name":"getThreads","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"getThreadsByNFTUsername","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"publicationCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"publicationFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"sockToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"stakingContract","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"}],"name":"updateNFTUsernameContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_publicationFee","type":"uint256"}],"name":"updatePublicationFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_stakingContract","type":"address"}],"name":"updateStakingContract","outputs":[],"stateMutability":"nonpayable","type":"function"}];


//0x54cdc95d8e45b9bde89556ded5fa38a5856a253c
const publisherContractAddress = '0xf8e01ee332845747920e3896586c7d9eb5147808';//polygon

let publisherContract;




const DirectMessage_ContractABI=[{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"encryptedMessage","type":"bytes"},{"name":"jsonMetadataEncrypted","type":"string"},{"name":"signature","type":"bytes32"}],"name":"sendDirectMessage","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"messageId","type":"uint256"}],"name":"markMessageAsDeleted","outputs":[],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"messageId","type":"uint256"}],"name":"markMessageAsNotDeleted","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"messageId","type":"uint256"}],"name":"undeleteAllSenderMessages","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"messageId","type":"uint256"}],"name":"markMessageAsDeleted","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"}],"name":"getConversation","outputs":[{"name":"","type":"bytes[][]"},{"name":"","type":"bytes[][]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"}],"name":"deleteAllSenderMessages","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"messageId","type":"uint256"}],"name":"markMessageAsNotDeleted","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"}],"name":"deleteAllSenderMessages","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"messageId","type":"uint256"}],"name":"undeleteAllSenderMessages","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"}],"name":"checkNFTOwnership","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"}],"name":"isNFTMinted","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"walletAddress","type":"address"}],"name":"getNFTUsername","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"signer","type":"address"},{"name":"message","type":"bytes"},{"name":"signature","type":"bytes32"}],"name":"verifySignature","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"senderNFTHash","type":"bytes32"},{"indexed":true,"name":"receiverNFTHash","type":"bytes32"}],"name":"DirectMessageSent","type":"event"}];

  
  
const directMessageContractAddress = '0x721ae299de508da89b4f68e28098ff60fde98065'; //polygon
  
    
      
const StakingPool_ContractABI = [{"constant":true,"inputs":[],"name":"getTotalStaked","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getTotalRewards","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"stakers","outputs":[{"name":"amountStaked","type":"uint256"},{"name":"lastClaimTimestamp","type":"uint256"},{"name":"totalRewardsEarned","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"amount","type":"uint256"}],"name":"stake","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"amount","type":"uint256"}],"name":"unstake","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"claimRewards","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"staker","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"Staked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"staker","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"Unstaked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"staker","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"RewardsClaimed","type":"event"},{"constant":true,"inputs":[{"name":"stakerAddress","type":"address"}],"name":"calculatePendingRewards","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"stakerAddress","type":"address"}],"name":"getStaker","outputs":[{"name":"amountStaked","type":"uint256"},{"name":"lastClaimTimestamp","type":"uint256"},{"name":"totalRewardsEarned","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}]; 


const stakingPoolContractAddress = '0xC6284bBEA6E993Ccf60add9DB1F7AEC644f9aCEa';    //polygon  


/*
FreeTokens_ContractABI = [{"constant":false,"inputs":[],"name":"conectar","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[],"name":"requestTokensCaw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"constant":false,"inputs":[],"name":"receiveTokensCaw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"obtenerSaldoEtherContrato","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"obtenerSaldoCawContrato","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_receiver","type":"address payable"}],"name":"sendEtherToAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}];


const freeTokensContractAddress = '0xa0b89d894939e5810849e602a3e3f3e75931b07e';//polygon  

*/

let globalWalletKey = "";
let provider;
let wallet;
//let web3;  // Definir web3 como global si necesitas usarlo en varias funciones
let web3;  
//let adjustedGasPrice


// Iniciar la aplicaci√≥n al cargar la p√°gina
document.addEventListener('DOMContentLoaded', (event) => {
    iniciarApp();
});
async function iniciarApp() {
    try {
        // Primero, intenta conectar usando la wallet propia si hay una clave privada almacenada
        const privateKey = localStorage.getItem("privateKey");
        console.log("privateKey" + privateKey ); 

        if (localStorage.getItem("privateKey")) {
            console.log("Conectando usando la wallet propia...");
            conectarWalletPropia(); // Conexi√≥n con wallet propia
        } 
           
        // Luego, si no hay wallet propia, intenta conectar con MetaMask
        else if (typeof window.ethereum !== 'undefined' && window.ethereum.isMetaMask ) {
            console.log("MetaMask detectado. Intentando conectar...");
            await conectarMetaMask(); // Conexi√≥n con MetaMask
        } 
        // Si no hay MetaMask ni una clave privada, muestra un error
        else {
            console.error("No se detect√≥ MetaMask ni una clave privada. Por favor, configura tu wallet.");
            return;
        }

        // Ejecutar l√≥gica com√∫n despu√©s de conectarse
        await inicializarUI();
    } catch (error) {
        console.error("Error en iniciarApp:", error);
    }
}
// Conectar con MetaMask




async function conectarMetaMask() {
    try {
        // Solicitar acceso a la cuenta del usuario
        await window.ethereum.request({ method: "eth_requestAccounts" });
        // Inicializar web3 con MetaMask
         // Inicializar web3 si no est√° definido
        if (!web3) {
            web3 = new Web3(window.ethereum);
        }
        
        // Obtener las cuentas conectadas
        const accounts = await web3.eth.getAccounts();
        globalWalletKey = accounts[0]; // Guardar la direcci√≥n de la wallet
        // Inicializar ethers.js provider y tokenContract
        provider = new ethers.providers.Web3Provider(window.ethereum);
        console.log("Conectado con MetaMask:", globalWalletKey);

        tokenContract = new web3.eth.Contract(CAW_tokenABI, tokenContractAddress);
        nftUsernameContract= new web3.eth.Contract(NFT_ContractABI, nftContractAddress);

        freeTokensContract= new web3.eth.Contract(FreeTokens_ContractABI, freeTokensContractAddress);

        betContract= new web3.eth.Contract(Bet_ContractABI, betContractAddress);
        profileContract = new web3.eth.Contract(Profile_ContractABI, profileContractAddress);
        followControlContract = new web3.eth.Contract(FollowControl_ContractABI, followControlContractAddress);
        
        publisherContract= new web3.eth.Contract(Publisher_ContractABI, publisherContractAddress);

    } catch (error) {
        console.error("Error al conectar con MetaMask:", error);
    }
}

// Conectar usando tu wallet propia
async function conectarWalletPropia() {
    
  try {
    const privateKey = localStorage.getItem("privateKey");
    if (!privateKey) {
        console.error("No se encontr√≥ una clave privada almacenada.");
        return;
    }

    const alchemyUrl = "https://polygon-mainnet.g.alchemy.com/v2/8gJweGU1u8NB60FICShTvPFy3oUu_zsA";
    provider = new ethers.providers.JsonRpcProvider(alchemyUrl);

    //const feeData = await provider.getGasPrice();
    //const gasPrice = feeData.gasPrice;
    //adjustedGasPrice = gasPrice.mul(110).div(100);
    //console.log("precio Ajustado***********.",adjustedGasPrice);

    wallet = new ethers.Wallet(privateKey, provider);
    globalWalletKey = wallet.address;

    // Configurar el proveedor general (puede ser para Alchemy o cualquier otro nodo)
    
    const signer = new ethers.Wallet(privateKey, provider);
    
    tokenContract = new ethers.Contract(tokenContractAddress, CAW_tokenABI, signer);
    nftUsernameContract = new ethers.Contract(nftContractAddress, NFT_ContractABI, signer);
    freeTokensContract= new ethers.Contract(freeTokensContractAddress, FreeTokens_ContractABI, signer );

    betContract= new ethers.Contract(betContractAddress, Bet_ContractABI, signer); 
    profileContract = new ethers.Contract(profileContractAddress, Profile_ContractABI,  signer); 

    followControlContract = new ethers.Contract(followControlContractAddress, FollowControl_ContractABI, signer);

    publisherContract = new ethers.Contract(publisherContractAddress, Publisher_ContractABI, signer);
          
    console.log("Conectado usando wallet propia:", globalWalletKey);
  } catch (error) {
        console.error("Error al conectar con wallet propia:", error);
    }

}



async function logout() {

    localStorage.removeItem("privateKey"); // Elimina la clave privada encriptada almacenada
    globalWalletKey = null; // Limpia la variable global de la direcci√≥n
    provider = null; // Limpia el proveedor    
    wallet= null;
    //let web3;  // Definir web3 como global si necesitas usarlo en varias funciones
    web3= null;
    alert("Sesi√≥n cerrada !!!");    
    // Redirige o recarga la p√°gina
    window.location.href = 'index.html';
}

// Inicializar la interfaz de usuario
async function inicializarUI() {
    // Mostrar direcci√≥n en la interfaz
    const loadingAnimation = document.getElementById('loadingAnimation-principal');
    loadingAnimation.style.display = 'block'; // Muestra la animaci√≥n al ejecutar la funci√≥n
           
 

    const start = globalWalletKey.slice(0, 6);
    const end = globalWalletKey.slice(-4);
    document.getElementById("addres-wallet").innerText = `${start}...${end}`;
    document.getElementById("addres-wallet").style.color = "white";


    //verificar si el servidor esta vivo o no 
    await verificarServidor(); 
      
    await getmintedNFT();
   
    await get_all_publications_home("home-publications-container");

    await get_NFTUsername_profile();

    // Obtener y mostrar saldos
    await obtenerSaldo_POL();
    await obtenerSaldo_SOCK();

    get_total_liked();
    //const nftusername = document.getElementById('selector_NFTs').value;
    //await get_NFTUsername_publication(nftusername,"my-publications-container");

    loadingAnimation.style.display = 'none';
    
    // Registrar eventos de botones
    document.getElementById("btn-mintear-nft").addEventListener("click", mintearNFT);
    //document.getElementById("btn-verify-nft").addEventListener("click", verifymintearNFT);
}







async function initializeTransactionContext() {
    try {
        let contractFREETOKENS; 
        //let signer, provider, myAddress, accounts;

        // Verificar si MetaMask est√° disponible
        if (typeof window.ethereum !== 'undefined') {
            // Si MetaMask est√° disponible
            console.log('MetaMask detectado');
           
            // Definir los contratos con web3.js (MetaMask)
            contractFREETOKENS = new web3.eth.Contract(FreeTokens_ContractABI, freeTokensContractAddress);
            
        } else {
            // Si MetaMask no est√° disponible, usar ethers.js con un proveedor y signer
            console.log('Proveedor personalizado detectado');
            
            // Definir los contratos con ethers.js
            contractFREETOKENS = new ethers.Contract(freeTokensContractAddress, FreeTokens_ContractABI, signer);
        }

        // Retornar los valores para ser utilizados en otras funciones
        return {
            contractFREETOKENS,
        };


    } catch (error) {
        console.error('Error al inicializar el contexto de la transacci√≥n:', error);
        throw new Error('No se pudo inicializar el contexto de la transacci√≥n: ' + error.message);
    }
}


async function obtenerGasAjustado() {
    try {
        // Obtener datos de gas

        //console.log("Gas Price:0");
        //console.log("Provider:", provider);

        //const feeData = await provider.getGasPrice();

        //console.log("Gas Price:1");  
        // Obtener el gasPrice base
        //const gasPrice = feeData.gasPrice;
        //console.log("Gas Price:2"); 
        // Incrementar el gasPrice en un 10%
        //const adjustedGasPrice = gasPrice.mul(110).div(100);
        const adjustedGasPrice = ethers.utils.parseUnits('110', 'gwei') 
        // Mostrar el gasPrice original y ajustado en Gwei
        console.log("Gas Price:x",adjustedGasPrice);
        //console.log("Gas Price con 10% extra:1.1x", );

        return adjustedGasPrice; // Devolver el gasPrice ajustado
    } catch (error) {
        console.error("Error al obtener el gas:", error);
    }
}

function get_total_liked() {
    const nftusername = document.getElementById('selector_NFTs').value;
    console.log("total likes user.",nftusername);
    fetch("https://api.thesocks.net/total-likes-user/", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ nft_username_post: nftusername })
    })
    .then(response => response.json())
    .then(data => {

        console.log("total likes user.",nftusername,data.total_likes);
        if (data && data.total_likes !== undefined) {
            document.getElementById("total_like_username").textContent = data.total_likes;
        } else {
            document.getElementById("total_like_username").textContent = "000";
        }
    })
    .catch(error => {
        console.error("Error al obtener total de likes:", error);
        document.getElementById("total_like_username").textContent = "0";
    });
}

/*async function obtenerSaldo_SOCK() {

    let accountBalance;
    if (tokenContract.methods) {
        console.log("Con MetaMask obtenerSaldo_SOCK().");
        // Usando web3.js
        accountBalance = await tokenContract.methods.balanceOf(globalWalletKey).call();
        console.log("accountBalance SOCK()M." + accountBalance);    
    } else {
        // Usando ethers.js
        console.log("Con SockWallet obtenerSaldo_SOCK().");        
        accountBalance = await tokenContract.balanceOf(globalWalletKey);
        console.log("accountBalance SOCK()." + accountBalance);    

    }

   // Convertir el saldo a una cadena
   const balanceString = accountBalance.toString();
   // Obtener los primeros d√≠gitos (de 0 a longitud - 18)
   const truncatedBalance = balanceString.slice(0, -18);
   // Mostrar el saldo en la p√°gina web
   const saldoElement = document.getElementById('saldo_CAW');
   saldoElement.innerText = truncatedBalance;
   saldoElement.style.color = 'black';

   console.log("Saldo Sock SOCK()." + truncatedBalance);

   const saldo_anterior = localStorage.getItem("truncatedBalance");
   localStorage.setItem("Saldo Sock", truncatedBalance);

   if (saldo_anterior<truncatedBalance){
      saldoElement.style.color = 'green';
   }else{

   }            
        


   return truncatedBalance;
}  
*/

async function obtenerSaldo_SOCK() {
    let accountBalance;

    if (tokenContract.methods) {
        console.log("Con MetaMask obtenerSaldo_SOCK().");
        accountBalance = await tokenContract.methods.balanceOf(globalWalletKey).call();
    } else {
        console.log("Con SockWallet obtenerSaldo_SOCK().");        
        accountBalance = await tokenContract.balanceOf(globalWalletKey);
    }

    // Convertir a n√∫mero sin decimales (18 decimales de un token ERC20)
    const balanceString = accountBalance.toString();
    const truncatedBalance = parseInt(balanceString.slice(0, -18) || "0", 10);

    const saldoElement = document.getElementById('saldo_CAW');
    const diffElement = document.createElement("span"); // Para mostrar la diferencia
    diffElement.style.marginLeft = "5px";
    diffElement.style.fontWeight = "bold";
    diffElement.style.transition = "transform 0.5s ease, opacity 0.5s ease";
    diffElement.style.display = "inline-block";

    // Mostrar primero el saldo anterior guardado
    const saldoAnterior = parseInt(localStorage.getItem("SaldoSock") || "0", 10);
    saldoElement.innerText = saldoAnterior;

    // Calcular diferencia
    const diferencia = truncatedBalance - saldoAnterior;

    if (diferencia > 0) {
        diffElement.textContent = `+${diferencia}`;
        diffElement.style.color = "green";
        diffElement.style.transform = "scale(0.5)";
        diffElement.style.opacity = "0.5";
        saldoElement.appendChild(diffElement);

        // Animar crecimiento
        requestAnimationFrame(() => {
            diffElement.style.transform = "scale(1.5)";
            diffElement.style.opacity = "1";
        });

        // Volver a tama√±o normal y mostrar saldo final
        setTimeout(() => {
            diffElement.remove();
            saldoElement.innerText = truncatedBalance;
            saldoElement.style.color = "green";
        }, 1000);

    } else if (diferencia < 0) {
        diffElement.textContent = `${diferencia}`;
        diffElement.style.color = "red";
        diffElement.style.transform = "scale(1.5)";
        diffElement.style.opacity = "1";
        saldoElement.appendChild(diffElement);

        // Animar decrecimiento
        requestAnimationFrame(() => {
            diffElement.style.transform = "scale(0.5)";
            diffElement.style.opacity = "0.5";
        });

        setTimeout(() => {
            diffElement.remove();
            saldoElement.innerText = truncatedBalance;
            saldoElement.style.color = "red";
        }, 1000);

    } else {
        // Si no hay cambio
        saldoElement.innerText = truncatedBalance;
        saldoElement.style.color = "black";
    }

    // Guardar el nuevo saldo
    localStorage.setItem("SaldoSock", truncatedBalance);

    return truncatedBalance;
}



// Funci√≥n para obtener el saldo del token
async function obtenerSaldo_POL() {


   let balanceEther;
   if (tokenContract.methods) {
       console.log("Con MetaMask obtenerSaldo_POL().");
       // Obtener el saldo en Wei (la unidad m√°s peque√±a de Ethereum)
       const balanceWei = await web3.eth.getBalance(globalWalletKey);       
       balanceEther = web3.utils.fromWei(balanceWei, 'ether');       
       
    
   } else {
        console.log("Con SockWallet obtenerSaldo_POL().");
       // Obtener el saldo de MATIC
        const balanceWei = await provider.getBalance(globalWalletKey);
        balanceEther = ethers.utils.formatEther(balanceWei);
   }

   const truncatedBalanceEther = parseFloat(balanceEther).toFixed(2);
   // Mostrar el saldo en la p√°gina web
   const saldoElementETH = document.getElementById('saldo_ETH');
   saldoElementETH.innerText = truncatedBalanceEther;
   saldoElementETH.style.color = 'purple';

   // Obtener el precio de MATIC en USD desde CoinGecko
   fetch('https://api.coingecko.com/api/v3/simple/price?ids=matic-network&vs_currencies=usd')
       .then(response => response.json())
       .then(data => {
           const maticPriceInUsd = data['matic-network'].usd;
           const balanceInUsd = (parseFloat(balanceEther) * maticPriceInUsd).toFixed(2);
           console.log("Valor en USD:", balanceInUsd);

           // Mostrar el valor en USD
           const saldoElementUSD = document.getElementById('saldo_USD');
           saldoElementUSD.innerText = " $" + balanceInUsd;
           saldoElementUSD.style.color = 'green';
       })
       .catch(error => console.error("Error al obtener el precio de MATIC:", error));

    return truncatedBalanceEther;
           
}


async function obtenerSaldo_POL_SOCK(){
    await obtenerSaldo_POL();
    await obtenerSaldo_SOCK();
}

// Funci√≥n para mintear un NFT
async function mintearNFT() {

            const loadingAnimation = document.getElementById('loadingAnimation-mint');
            loadingAnimation.style.display = 'block'; // Muestra la animaci√≥n al ejecutar la funci√≥n
           
            // Mintear el NFT
            const nftusername = document.getElementById('text-mintear-nft').value;
            const codeimageHexa = document.getElementById("codeimageHexa").textContent;
            const maticrequired = document.getElementById("mount-minteo").textContent;

            const errorDisplay = document.getElementById('Error_Minted_username');
            const readyDisplay = document.getElementById('Minted_username');
            
            //alert('Hexa: ' + codeimageHexa);
            
            try {   

                      let isMintedNFT;            
                      if (nftUsernameContract.methods) {
                                   console.log("Con MetaMask ");
                                   // Usando web3.js
                                   isMintedNFT = await nftUsernameContract.methods.isMinted(nftusername).call();
                      } else {
                                   // Usando ethers.js
                                  console.log("Con SockWallet "); 
                                  isMintedNFT = await nftUsernameContract.isMinted(nftusername); 
                      }  

                      if(isMintedNFT){
                        
                         errorDisplay.textContent = 'El nombre de usuario no esta disponible!.';
                         
                         loadingAnimation.style.borderLeftColor = 'red';                 
                         setTimeout(() => { 
                              loadingAnimation.style.display = 'none';
                         }, 2000);

                      
                      }else{  

                            let maticAmount;
                            if (nftUsernameContract.methods) {
                                  console.log("Con MetaMask");
                                  maticAmount = web3.utils.toWei(maticrequired, 'ether'); 
                                
                                    // Ejecutar la funci√≥n mintNFT
                                  await nftUsernameContract.methods.mintNFT(nftusername, codeimageHexa).send({
                                      from: globalWalletKey,
                                      gas: 800000,
                                      gasPrice: web3.utils.toWei('60', 'gwei'),
                                      value: maticAmount // Especificar el valor de 10 MATIC
                                  });
                                    // L√≥gica espec√≠fica para contratos instanciados con web3.js
                            } else {
                                    console.log("Con SockWallet.");
                                  
                                    maticAmount = ethers.utils.parseEther(maticrequired); //
                                    
                                    const tx = await nftUsernameContract.mintNFT(nftusername, codeimageHexa, {
                                      gasLimit: 800000,
                                      gasPrice: ethers.utils.parseUnits('60', 'gwei'), // Gas price en gwei
                                      value: maticAmount // Especificar el valor en Wei
                                      });

                                      console.log("Transacci√≥n enviada:", tx.hash);

                                      // Esperar confirmaci√≥n
                                      const receipt = await tx.wait();
                                      console.log("Transacci√≥n confirmada:", receipt);
                                      alert('Transaction ok :)');
                                   // L√≥gica espec√≠fica para contratos instanciados con ethers.js
                            }

                            //alert('NFT Minteado exitosamente:');
                            loadingAnimation.style.borderLeftColor = 'dodgerblue';                 
                            setTimeout(() => { 
                                loadingAnimation.style.display = 'none';
                                $('#myModal').modal('hide'); 
                            }, 2000);
                            

                            await get_NFTUsername_profile();
                            info_profile_sock();

                              // Mostrar mensaje de √©xito
                            showSuccess('NFT minteado correctamente.');
                      
                      }
        
              
            } catch (error) {

                  // Cambia el color de la animaci√≥n a rojo y lo mantiene 2 segundos
                  loadingAnimation.style.borderLeftColor = 'red';                 
                  setTimeout(() => { 
                      loadingAnimation.style.display = 'none';
                  }, 2000);

                  if (error.message.includes("Invalid username")) {
                    showSuccess('Nombre Invalido.');
                  }else if (error.message.includes("Insufficient Sock balance")){
                    showSuccess('Insuficiente saldo $ POL.');
                  }else  {
                    //alert('Error al mintear el NFT');
                    console.error('Error al crear el Nombre de Usuario:', error);
                  }                  

              
            }

          
          }


          // Funci√≥n para mintear un NFT
async function getmintedNFT() {
                                         
        try {
             
             let list_username;
             let total_minted_username;

             if (nftUsernameContract.methods) {
                 console.log("Con MetaMask ");
                 // Usando web3.js
                 list_username = await nftUsernameContract.methods.getMintedUsernames(globalWalletKey).call();
                 total_minted_username = await nftUsernameContract.methods.getTotalMintedNFTs().call();

             } else {
                 // Usando ethers.js
                 console.log("Con SockWallet "); 
                 list_username = await nftUsernameContract.getMintedUsernames(globalWalletKey);
                 total_minted_username = await nftUsernameContract.getTotalMintedNFTs();                                    
              }

                             
              const total_nft_Username = document.getElementById('NFTUsernames-count');
              total_nft_Username.style.color = 'black';
              total_nft_Username.innerHTML =`${total_minted_username}`; 
              
                                    
              const selector = document.getElementById('selector_NFTs');
              // Limpiar las opciones existentes
              selector.innerHTML = '';
              // Agregar las opciones de NFTs
              for (const nft of list_username) {
                const option = document.createElement('option');
                option.text = nft;
                selector.add(option);
              }


              getImageNFTUsername("NFT_image-container");

              await get_NFTUsername_profile();
               
              info_profile_sock();            
              
              showSuccess('List NFT username OK!.');
 //             console.log('Funcion list NFTs OK.');
               // Mostrar mensaje de √©xito
 //             showSuccess('Funcion list NFTs OK.');
        } catch (error) {
              showSuccess('No List NFT username.');
              //alert('Error list NFT');
              console.error('Error list NFT:', error);
        }
         
}

 // Obtener el selector de NFTs
 const selectorNFTs = document.getElementById('selector_NFTs');
 // Agregar evento 'change' al selector
 selectorNFTs.addEventListener('change', async () => {
            getImageNFTUsername("NFT_image-container");
            get_total_liked();
            info_profile_sock();

            await get_NFTUsername_profile();
 
          });
      





function mostrarModal_si_no(mensaje, funcSi, funcNo) {
    document.getElementById("user-question").innerHTML = mensaje;
    // Asignar eventos a los botones
    document.getElementById("modal-btn-yes").onclick = function () {
      if (funcSi) funcSi();
      $('#myModal_Si_No').modal('hide');
    };

    document.getElementById("modal-btn-no").onclick = function () {
      if (funcNo) funcNo();
      $('#myModal_Si_No').modal('hide');
    };

    // Mostrar el modal
    $('#myModal_Si_No').modal('show');
}
        
function hacer_nada() {
  // No hace nada
}        


 function tiempoTranscurrido(timestamp) {

  timestamp=timestamp*1000;
  const diferencia = Date.now() - timestamp;
  const segundos = Math.floor(diferencia / 1000);
  const minutos = Math.floor(segundos / 60);
  const horas = Math.floor(minutos / 60);
  const dias = Math.floor(horas / 24);

  if (segundos < 60) {
    return 'Hace unos segundos';
  } else if (minutos < 60) {
    return `Hace ${minutos} ${minutos === 1 ? 'minuto' : 'minutos'}`;
  } else if (horas < 24) {
    return `Hace ${horas} ${horas === 1 ? 'hora' : 'horas'}`;
  } else {
    const fecha = new Date(timestamp);
    return fecha.toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' });
  }
}     
         
          // Funciones para mostrar mensajes en la p√°gina

          function showSuccess(message, details = null) {
              const successElement = document.getElementById('success-message');
              successElement.innerText = message;

              if (details) {
                  console.log('Detalles de √©xito:', details); // Mostrar en consola
                  successElement.innerText += `\nDetalles: ${details}`;
              }
          }


          
          function showError(message, error = null) {
              const errorElement = document.getElementById('error-message');
              errorElement.innerText = message;

              if (error) {
                  console.error('Detalles del error:', error); // Mostrar en consola
                  errorElement.innerText += `\nDetalles: ${error.message || error}`; // Mostrar en la UI
              }
          }

      

/*
async function verifymintearNFT(){

        
    const nftusername = document.getElementById('text-mintear-nft').value;
    const bottonMint = document.getElementById('btn-mintear-nft');
    const bottonVerifyMint = document.getElementById('btn-verify-nft');
    const errorDisplay = document.getElementById('Error_Minted_username');
    const readyDisplay = document.getElementById('Minted_username');

    let isMintedNFT;
    if (nftUsernameContract.methods) {
                 console.log("Con MetaMask ");
                 // Usando web3.js
                 isMintedNFT = await nftUsernameContract.methods.isMinted(nftusername).call();
    } else {
                 // Usando ethers.js
                console.log("Con SockWallet "); 
                isMintedNFT = await nftUsernameContract.isMinted(nftusername); 
    }
      
    
    if(isMintedNFT){

       errorDisplay.style.display = 'block';
       readyDisplay.style.display = "none"
       errorDisplay.textContent = 'The username is not available!.';
             

    }else{
       errorDisplay.style.display = 'none';
       readyDisplay.style.display = "block"
       readyDisplay.textContent= "The username is For You! :) "
       bottonMint.style.display = 'block';
       bottonVerifyMint.style.display = 'none';
    }

    
}    
*/   

</script>

<script>
const inputField = document.getElementById('text-mintear-nft');
const output = document.getElementById('mount-minteo');
const errorDisplay = document.getElementById('Error_Minted_username');
const bottonMint = document.getElementById('btn-mintear-nft');

//const bottonVerifyMint = document.getElementById('btn-verify-nft');



function isValidNFTUsername(username) {
  return /^[a-z0-9]+$/.test(username);
}


inputField.addEventListener('input', function() {
  const enteredText = inputField.value.trim();
  const count = enteredText.length;
  const saldoPol = parseFloat(document.getElementById('saldo_ETH').textContent);
  //bottonMint.style.display = 'none';
  //bottonVerifyMint.style.display = 'block';
  
  if (!isValidNFTUsername(enteredText)) {
    errorDisplay.style.display = 'block';
    errorDisplay.textContent = 'Solo letras minusculas y numeros son validos.';
    output.textContent = '';
    bottonMint.style.display = 'none';
    
  } else {
    errorDisplay.style.display = 'none';
    bottonMint.style.display = 'block';

    let maticNeeded = 0;
    if (count >= 8) {
      maticNeeded = 8;
    } else if (count === 1) {
      maticNeeded = 36;
    } else {
      switch (count) {
        case 2:
          maticNeeded = 29;
          break;
        case 3:
          maticNeeded = 23;
          break;
        case 4:
          maticNeeded = 18;
          break;
        case 5:
          maticNeeded = 14;
          break;
        case 6:
          maticNeeded = 11;
          break;
        case 7:
          maticNeeded = 9;
          break;
      }
    }

    if (saldoPol < maticNeeded) {
      output.textContent = `${maticNeeded}`
      output.style.fontSize = '36px'; // Cambia el tama√±o de fuente
      output.style.color = 'white'; // Cambia el color`ID: ${publication_ID}`;
      //bottonMint.style.display = 'none';
    } else {
      output.textContent = `${maticNeeded}`;
      output.style.fontSize = '36px'; // Cambia el tama√±o de fuente
      output.style.color = 'red'; // Cambia el color
      errorDisplay.textContent="No tienes suficiente saldo $ POL"

      //bottonMint.style.display = 'block';
    }
  }
});

</script>
  
<script>
const textArea = document.getElementById('publicacion');
const charCount = document.getElementById('char-count');
const butonPublication=document.getElementById('btn-publication')

textArea.addEventListener('input', function() {
    // Obtener el conteo de caracteres restantes
    const maxLength = 420;
    const remaining = maxLength - textArea.value.length;

  
    

    // Mostrar el conteo solo cuando sea 21 o menos, o si se ha superado el l√≠mite
    if (remaining <= 31 || remaining < 0) {
        charCount.textContent = remaining < 0 ? '0' : remaining;
    } else {
        charCount.textContent = ''; // Si hay m√°s de 21 caracteres restantes, oculta el conteo
    }

    

    if (remaining < 0){
        butonPublication.style.display='none';
    }else{
        butonPublication.style.display='block';
    }
    

    
});

</script>  


<script>
  // Busca y colorea los caracteres @ y #
const postText = document.getElementById('postText');
const text = postText.innerHTML;
const modifiedText = text
    .replace(/@(\S+)/g, '<span class="atSymbol">@$1</span>')
    .replace(/#(\S+)/g, '<span class="hashtag">#$1</span>');
postText.innerHTML = modifiedText;

// Revisar si hay un enlace de imagen o video
const mediaContent = document.getElementById('mediaContent');
const linkToMedia = 'https://pbs.twimg.com/profile_banners/3359503481/1691164787/1500x500'; // Ejemplo de enlace a imagen
const linkToVideo = 'https://youtu.be/8DWeaY3EROE'; // Ejemplo de enlace a video

// Verificar si es una imagen
if (/\.(jpeg|jpg|gif|png)$/.test(linkToImage)) {
    mediaContent.innerHTML = `<img src="${linkToImage}" alt="Imagen">`;
} else {
    mediaContent.innerHTML = 'No se encontr√≥ imagen';
}

//if (linkToMedia.endsWith('.jpg') || linkToMedia.endsWith('.png') || linkToMedia.endsWith('.gif')) {
    // Muestra la imagen
//    mediaContent.innerHTML = `<img src="${linkToMedia}" alt="Imagen">`;
//} else if (linkToMedia.endsWith('.mp4') || linkToMedia.endsWith('.avi') || linkToMedia.endsWith('.mov')) {
    // Muestra el video
//    mediaContent.innerHTML = `<video controls><source src="${linkToVideo}" type="video/mp4"></video>`;
//}
</script>

 <script>
          function myFunctionbtc() {
            // Crea un √°rea de texto temporal para copiar el contenido
            var areaDeTextoTemp = document.createElement("textarea");
            areaDeTextoTemp.value = globalWalletKey;

            // Agrega el √°rea de texto temporal al documento
            document.body.appendChild(areaDeTextoTemp);

            // Selecciona el contenido del √°rea de texto
            areaDeTextoTemp.select();
            areaDeTextoTemp.setSelectionRange(0, 99999); // Para dispositivos m√≥viles

            // Intenta copiar el contenido al portapapeles
            document.execCommand("copy");

            // Elimina el √°rea de texto temporal ya que ya no es necesaria
            document.body.removeChild(areaDeTextoTemp);

            // Muestra el mensaje de "Copiado!" en el bot√≥n
            var btnCopyKey = document.getElementById("btn-copy-key");
            var originalContent = btnCopyKey.innerHTML;
            btnCopyKey.innerHTML = "<font color='white'>¬°Copiado!</font>";

            // Vuelve al estado original despu√©s de 2 segundos
            setTimeout(function() {
                btnCopyKey.innerHTML = originalContent;
            }, 2000);
        }
          
          
          </script>

<script>
 

  
 function generarCodigoQR() {
        var divElement = document.getElementById("addres-wallet");
        var divElementQR = document.getElementById("addres-wallet-QR");
        divElementQR.innerText="";

        if (divElement) {
          var walletAddress = globalWalletKey.trim();
          var qrcode = new QRCode(divElementQR, {
            text: walletAddress,
            width: 256,
            height: 256,
          });
        } else {
          console.error("Elemento no encontrado: addres-wallet");
        }
  }

</script>


<script>
    async function mostrar_mis_publicaciones(){ 
        const nftusername = document.getElementById('selector_NFTs').value;
        await get_NFTUsername_publication(nftusername,"my-publications-container");
    }
</script>  


<script src="bootstrap/js/jquery.min.js" ></script>
<script src="bootstrap/js/bootstrap.min.js"></script>

</body>
</html>