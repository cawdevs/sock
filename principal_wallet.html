<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOCK PUPPETS</title>

     <style>
      html {
           background: linear-gradient(45deg, orange,darkred);
             }
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(0deg, orange,darkred);
        }
   
        .container {

            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 30px;
        }

        .boton-conectar {
            background-color: silver;
            color: black;
            border: 2px solid silver;
            border-radius: 20px;
            padding: 5px 10px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            display:inline-block;
            margin-left: 40px;
        }

        .boton-conectar:hover {
            background-color: lime;
            border-color: lime;
            display:inline-block;

        }
     
    </style>

     <style>
.gallery_toolbar {
  padding: 1rem;
  display: flex;
  grid-template-columns: repeat(20, 25vw);
  grid-template-rows: 1fr;
  grid-column-gap: 1rem;
  grid-row-gap: 1rem;
  overflow: scroll;

 
  scroll-snap-type: both mandatory;
  scroll-padding: 1rem;

  background-color: white;
}

.active {
  scroll-snap-type: unset;
}
</style>




<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<!-- Agrega el siguiente script para cargar la biblioteca desde un CDN -->
<script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>







</head>


<body>
<script src="messageDirect.js"></script>
<script src="stakingpool.js"></script>
<script src="responses.js"></script>

<script src="FreeDistributionSockMatic.js"></script>

<script src="MintNFTUsernameandPuppet.js"></script>
<script src="FindAndFilter.js"></script>


<!--<script type="module" src="main.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>


<br>
 


<!--
 <center>  <div>
    <img src="images/sock_logo.SVG" alt="My svg_logo" width="45" class="img-circle" style="transform: rotate(0deg); display: inline-block; margin-left: 10px;border: 2px solid white;">
   
    <h3 style="display: inline-block; margin: 0; vertical-align: middle; margin-left: 10px;"><font color="white"><i> SockPuppets </i></font> </h3>
<i class="fa-brands fa-github" style="color: #FFD43B;"></i>

     <a  href="whiteDocument.html" target="_blank" ><img src="images/icons/document_icon.SVG" alt="My svg_logo" width="25"  style="transform: rotate(0deg); display: inline-block; margin-left: 20px; "></a>

    

     <a href="https://github.com/cawdevs" target="_blank" rel="noopener noreferrer"> <img src="images/logoG.SVG" alt="My svg_logo" width="25"  style="transform: rotate(0deg); display: inline-block; margin-left: 20px; ">
     </a>

     <a href="https://x.com/puppets_token" target="_blank" rel="noopener noreferrer"> <img src="images/logoX.svg" alt="My svg_logo" width="25"  style="transform: rotate(0deg); display: inline-block; margin-left: 20px; ">
     </a>

      	
    <button class="boton-conectar" id="btn-conectar" onclick="conectarMetaMask()" style="display: inline-block; margin-left: 20px;">Conect</button>



 </div></center>


-->






    <center><div> 

    


   <h5>
    <div style="display:inline-block;" id= "addres-wallet"><font color="white"></font></div>


    <div style="display:inline-block;" ><button class="boton-conectar" id="btn-conectar" onclick="conectarMetaMask()" style="display: inline-block; margin-left: 20px;">Connect</button> </div>
   
    <div style="display:inline-block;" > </div>

    <a href="#" data-toggle="modal" data-target="#myModalQR"style="display:inline-block;" onclick="generarCodigoQR()"><font color="white"><span class="glyphicon glyphicon-qrcode"></span></font></a>

  
   <div style="display:inline-block;" > </div>
   <div style="display:inline-block;" > </div>
     <a href="#" style="display:inline-block;" id="btn-copy-key"><font color="white"><span class="glyphicon glyphicon-duplicate" onclick="myFunctionbtc()"></span></font></a>
    <!-- <a class="btn btn-primary  btn-xs" role="button" onclick="myFunctionbtc()" onmouseout="outFuncbtc()" ><font color="white" size="5"> <span class="tooltiptext" id="myTooltipbtc">Copiar btc wallet</span></font></a>
     -->    

   </h5>
 </div></center> 

 

<br>

<div class="container-fluid">
<div class="row">

   <div class="col-sm-1"> 
   </div>

          
 <div class="col-sm-6">   





<nav class="navbar navbar-inverse" role="navigation" style="border: 2px solid white; border-radius: 20px; background: black; position: relative; height: 50px;"> <!-- Ajusta la altura de la barra aquí -->
    <div class="container-fluid" style="display: flex; align-items: center; justify-content: flex-start; height: 100%;">

        <!-- Selector de NFTs a 120px del borde izquierdo -->
        <div style="margin-left: 110px; display: flex; align-items: center;">
            <select id="selector_NFTs" class="form-control" placeholder="Username" style="border: 2px solid lime; border-radius: 10px; font-size: 24px; height: auto; width: 150px;"></select>
        </div>

        <!-- Icono de publicación -->
        <div style="display: flex; align-items: center; margin-left: 10px;">
            <a href="#" data-toggle="modal" data-target="#myModal">
                <span class="glyphicon glyphicon-plus-sign" style="color: lime; font-size: 30px; vertical-align: middle;"></span>
            </a>
        </div>

    </div>

    <!-- Imagen NFT sobrepuesta a la izquierda -->

     <div  style="border: 2px solid white; border-radius: 50%; position: absolute; top: 50%; left: 10px; transform: translateY(-50%); width: 80px; height: 80px;">
        <div id="NFT_image-container" style=" width:80px;  height: 80px;"> </div>
    </div>


    
</nav>



                  
       <!--   
       <div class="well" style="border: 2px solid lime; background: black; border-radius: 20px;">  -->
                    <!--<div style="background: red; width:90px; height: 50px; display: inline-block; margin-top: 50px;"></div>  -->

                    <h4> 
                      <p style="display:inline-block;"><img src="images/icons/sock_coin.SVG" alt="My svg_logo" width="30"  style="transform: rotate(0deg); display: inline-block; margin-left: 20px; "></p>
     <div style="display:inline-block;" id="saldo_CAW"><font color="lime"></font></div>

     <div style="display:inline-block;" > </div>
     <div style="display:inline-block;" > </div>
     <p style="display:inline-block;"><img src="images/icons/matic_coin.SVG" alt="My svg_logo" width="30"  style="transform: rotate(0deg); display: inline-block; margin-left: 20px; "></p>
     <div style="display:inline-block;" id="saldo_ETH"><font color="Magenta "></font></div>
     <div style="display:inline-block;" > </div>
     <div style="display:inline-block;" > </div>
     <a href="#" style="display:inline-block;" id="btn-obtener-saldo"><font color="black"><span class="glyphicon glyphicon-refresh"></span></font></a>
     
     <div style="display:inline-block;" > </div>

     

         
<!--
           <div class="input-group">                 

                  <input type="text" id="text-address-to-send-ETH" class="form-control" placeholder="enter a 0x.. to send ETH" style="border: 2px solid black; border-radius: 10px; width: 100%; height: 40px; margin-right: 10px;">
            
                  <div class="input-group-btn">
                       <button id="btn-send-ETH-wallet" class="btn btn-default" onclick="sendETHtowallet()" style="background-color: black; color: white; border: 2px solid lime; border-radius: 20px; height: 40px;">
                         <span class="glyphicon glyphicon-send"></span>
                       </button>  

                        <button class="boton-conectar" id="btn-caw-free" onclick="tokensFree('SOCK')" style="display: inline-block; margin-left: 10px;">2M SOCK FREE</button>   
                           
                  </div>
           </div>

  -->
 

     
    </h4>




 


  
 
  <ul class="gallery_toolbar" style="background-color: lightgray; border: 2px solid lime; border-radius: 20px;">     
     
       <a data-toggle="tab" href="#home" style=" margin-left: 15px;">  <img  id="image-home" src="images/icons/home_icon.SVG" alt="home" width="45"></a> 
       
       <a data-toggle="tab" href="#menu1" style=" margin-left: 15px;">  <img  id="image-home" src="images/icons/profile_icon.SVG" alt="home" width="45"> </a>
       
       <a data-toggle="tab" href="#menu2" style=" margin-left: 15px;">  <img  id="image-cars" src="images/icons/publication_icon.SVG" alt="home" width="45"> </a>
       
       <a data-toggle="tab" href="#menu_mensaje" style=" margin-left: 15px;">  <img  id="image-food" src="images/icons/message_icon.SVG" alt="home" width="45"> </a>
       
       <a data-toggle="tab" href="#menu_play" style=" margin-left: 15px;">  <img  id="image-market" src="images/icons/game_icon.SVG" alt="home" width="45"> </a>
                          
       <a data-toggle="tab" href="#menu_play_to_earn" style=" margin-left: 15px;">  <img  id="image-mymarket" src="images/icons/gamefi_icon.SVG" alt="mymarket" width="45"> </a>

       <a data-toggle="tab" href="#menu_transfer" style=" margin-left: 15px;">  <img  id="image-service" src="images/icons/swap_icon.SVG" alt="home" width="45"> </a>

        <a data-toggle="tab" href="#menu_staking" style=" margin-left: 15px;">  <img  id="image-service" src="images/icons/staking_icon.SVG" alt="home" width="45"> </a>

       <a data-toggle="tab" href="#menu_info_sock" style=" margin-left: 15px;">  <img  id="image-service" src="images/icons/config_icon.SVG" alt="home" width="45"> </a>
       
       
</ul>
 


 <style>
  /* Estilos para los caracteres @ y # */
span.atSymbol {
    color: blue; /* Color azul para @ */
}

span.hashtag {
    color: red; /* Color rojo para # */
}

/* Estilos para la imagen o el video */
#mediaContent img,
#mediaContent video {
    max-width: 100%; /* Ajuste para el ancho */
    height: auto;
}
</style>






  <div class="tab-content" style="border: 2px solid lime; border-radius: 20px; background:white;">
    



    <div id="home" class="tab-pane fade in active" >
         <div class="user-following-publication-container"  >
           <br>
            
             <center><h3>Follower and following publication</h3></center>
              <br>
               <br>


         </div> 
    

    </div>
<!--#################################################-->    





    <div id="menu1" class="tab-pane fade">
   <!--****************************************************-->
   <!--****************************************************-->
   <br>
            
             <center><h3>Follower and following username</h3></center>
              <br>
               <br>

       
   </div>  




    <div id="menu2" class="tab-pane fade">    
       <!-- <div class="user-publication-container">
             <a href="games/asteroides/asteroides.html" target="_blank">Jugar Asteroides</a>            
        </div> -->

         <br>
          
             <center><h3>You Publications</h3></center>
              <br>
               <br>

        
         
    </div>

  


    


    <!--/////////////////////////////////////////////////////////////-->
    <!--/////////////////////////////////////////////////////////////-->
    <div id="menu_mensaje" class="tab-pane fade">
      
      <div class="container-fluid"> 
          <h4><div id="nft-username-list-direct-message"></div></h4>   
          <br>
           
             <center><h3>Direct Messages</h3></center>
              <br>
               <br>
      </div>
    </div>
    <!--/////////////////////////////////////////////////////////////-->
     <!--/////////////////////////////////////////////////////////////-->
    <!--/////////////////////////////////////////////////////////////-->
    <div id="menu_play" class="tab-pane fade">
      
      <div class="container-fluid"> 
          <h4><div id="nft-username-list-direct-message"></div></h4>   
          <br>
           
             <center><h3>Games</h3></center>
             <!-- Botón opcional para 2mcargar el juego -->
         <button onclick="loadGame()">load game Cartas</button>
          <div id="gameContainer"></div>
              <br>
               <br>
      </div>
    </div>
  
    <!--/////////////////////////////////////////////////////////////-->
 <!--/////////////////////////////////////////////////////////////-->
    <!--/////////////////////////////////////////////////////////////-->
    <div id="menu_play_to_earn" class="tab-pane fade">
      
      <div class="container-fluid"> 
          <h4><div id="nft-username-list-direct-message"></div></h4>   
          <br>
           
             <center><h3>Game play to earn and Bets</h3></center>
              <br>
               <br>
      </div>
    </div>


<!--/////////////////////////////////////////////////////////////-->
    <!--/////////////////////////////////////////////////////////////-->
    <div id="menu_transfer" class="tab-pane fade">
          
          <br>
          <center><h3><p>Swap and transfer token</p></h3></center> 
          
          <br>
          <br>
           
    
    </div>     
<!--/////////////////////////////////////////////////////////////-->
    <!--/////////////////////////////////////////////////////////////-->

    <div id="menu_staking" class="tab-pane fade" >
       
         <div class="container-fluid" style = "width:80%; align-items: center;">
                       </div>

          <br>   
              <center>  <h3>Staking Pool</h3> </center>                   
                  <br>
                 
                 <br>  
          
    </div> 

    
          
                   
   
    <!--/////////////////////////////////////////////////////////////-->
    <!--/////////////////////////////////////////////////////////////-->

 <div id="menu_info_sock" class="tab-pane fade">      
     
                <br>
                <center><h3><p>Info Sock Puppets</p></h3></center>
                <br>       
                <div id="info-user-keys"></div>  
                <div id="info-sock"></div>
                          
 </div>
 <!--/////////////////////////////////////////////////////////////-->
 <!--/////////////////////////////////////////////////////////////-->







    

  </div>

                    
  
     





                </div>
<br>

            
<style>
.col-sm-4 {
    position: -webkit-sticky;
    position: sticky;
    top: 0;
    height: 100vh; /* Establece la altura máxima del contenido pegajoso */
    overflow-y: auto; /* Agrega un desplazamiento vertical si es necesario */
    /* Otros estilos para la columna sm-3 */
}

</style>



            <div class="col-sm-4">
               
                <div class="well" style="border: 2px solid lime; background: black; border-radius: 20px;">

                     
                          <div class="input-group">
                            <input type="text" id="text-address-wallet" class="form-control" placeholder="Search 0x.. or NftUsername" style="border: 2px solid black; border-radius: 20px; width: 100%; height: 40px; margin-right: 10px;">
                            <div class="input-group-btn">
                              <button id="btn-find-nft" class="btn btn-default"  onclick="findNftWallet('user')" style="background-color: black; color: white; border: 2px solid lime; border-radius: 20px; height: 40px;">
                                <span class="glyphicon glyphicon-search"></span>
                              </button>                             
                            </div>
                          </div> 
                           <br>




                           <button id="btn-find-followin"  onclick="findNftWallet('following')"style="background-color: black; color: white; border: 2px solid lime; border-radius: 20px; height: 40px;">Following</button> 

                           <!--<button id="btn-find-nft-for-you" onclick="findNftWallet('foryou')" style="background-color: black; color: white; border: 2px solid lime; border-radius: 20px; height: 40px;">
                                </span>For you. 
                              </button>--> 

                              <button id="btn-find-nft-for-you-rand" onclick="findNftWallet('foryourand')" style="background-color: black; color: white; border: 2px solid lime; border-radius: 20px; height: 40px;">
                               Rand. 
                              </button> 

                              <button id="btn-find-nft-for-you-last" onclick="findNftWallet('foryoulast')"  style="background-color: black; color: white; border: 2px solid lime; border-radius: 20px; height: 40px;">
                                Last. 
                              </button>                              
          
                
                       
                           
                           <br>
                          <h4><div id="nft-username-list" style="border: 2px solid white"></div></h4>

                           <h4><div id="nft-username-list-for-you"></div></h4>
                                                                 
           
                    
                </div>     

                   
              
                  <div class="well" style="border: 2px solid lime;  border-radius: 20px;">

                    <!--<button class="boton-conectar"  onclick="openBuyNftModal(`ernesto`)" style="display: inline-block; margin-left: 10px;">load image</button>   
                   -->
                    <div id="success-message"></div>
                           <div id="error-message"></div>  
                          
                  </div>

                                             
                                                 
                            
                                         
                </div>               



            </div>

            <div class="col-sm-1"> 
            </div>

            
        </div>
    </div>





<!-- ############## ventana emergente Publicaciones ###########################-->
<!-- #################################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->

<div class="container">
  
  <!-- Modal -->
  <div class="modal fade" id="myModal_publication" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content" style="background: linear-gradient(180deg, lime, black);">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          
                    
                   <div style="display: flex; align-items: center; justify-content: flex-start; ">
         
          <img id="image-perfil-publication" src="static/images/caw_logo_2.svg" alt="My svg_logo" width="60" class="img-circle" style="border: 4px solid white;">
          <h3><p style="display:inline-block; margin-left: 20px;" id="nftUsername-publication"></p></h3> 
     
          
          </div>
        </div>
        <div class="modal-body">
         

     <!--//////////////////////////////////////////////////////////////-->   
      <!--//////////////////////////////////////////////////////////////-->  
       <!--//////////////////////////////////////////////////////////////-->  
                   <form>
    <div class="form-group">
      <textarea class="form-control" id="publicacion" rows="3" placeholder="¡¿What are you dreaming about?!" required style=" display:inline-block; border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 160px; font-size: 18px; "></textarea>
    </div>


   <div style="display: flex; align-items: center; ">
    <div style="display: flex; align-items: center; justify-content: flex-start; ">
        
        <div style=" display:inline-block; margin-bottom: 10px;" class="form-group">
            <select class="form-control" id="filter-privacidad" style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 40px;">
                <option>*</option>
                <option>+12</option>
                <option>+18</option>
            </select>
        </div>

        <button data-toggle="collapse" data-target="#demo" style="display:inline-block; margin-left: 20px;  margin-bottom: 10px; ">
            <span class="glyphicon glyphicon-picture"></span>
        </button>

        <h4><font color="red"><p style="display:inline-block; margin-left: 30px;" id="char-count"></p></font></h4>
    
    </div>

    <a href="#" style = " margin-left: auto;  margin-bottom: 10px;" id="btn-publication">
        <img src="static/images/caw_enviar.svg" alt="Publicar CAW" width="75">
    </a>


</div>

 
      <div id="demo" class="collapse">    
           <input type="text" id="media-publication" placeholder=" Link to media publication" style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 40px;">
      </div>
 
       
  </form>



  <center>
       
       <div id="loadingAnimation-publication" style="display: none;">
              <div class="spinner"></div>               
       </div>

   </center> 

 <!--//////////////////////////////////////////////////////////////-->  
  <!--//////////////////////////////////////////////////////////////-->  
   <!--//////////////////////////////////////////////////////////////-->  




        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
  
</div>

<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->

<!-- ############## ventana emergente RESPONSES ###########################-->
<!-- #################################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<style>
.spinner {
  border: 5px solid rgba(0, 0, 0, 0.1);
  border-left: 5px solid #FFD700; /* Amarillo */
  border-radius: 50%;
  width: 50px;
  height: 50px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>


<div class="container">
  <!-- Modal -->
  <div class="modal fade" id="myModal-responses" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content" style="background: linear-gradient(180deg, lime, black);">
        <div class="modal-header">
          <div class="profile-form">
            

          </div>
        </div>
        <div class="modal-body">
         
          <center>

            <div id= "responses" > </div>

                       
          </center>


          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>  
</div>
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->

<!-- ############## ventana emergente Mintear NFTusernameCAW ###########################-->
<!-- #################################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<style>
.spinner {
  border: 5px solid rgba(0, 0, 0, 0.1);
  border-left: 5px solid #FFD700; /* Amarillo */
  border-radius: 50%;
  width: 50px;
  height: 50px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>


<div class="container">
  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content" style="background: linear-gradient(180deg, lime, black);">
        <div class="modal-header">
           <button type="button" class="close" data-dismiss="modal">&times;</button>
          <div class="profile-form">
            <center>
              <h3>NFTUsername</h3>
            </center>
          </div>
        </div>
        <div class="modal-body">


        <div style="display: flex; align-items: center; justify-content: flex-start; gap: 0;"> 
          <p><h2>Matic required is: </h2></p>
          <p id="mount-minteo"></p>
        </div>

     <center>

          <div id="loadingAnimation-mint" style="display: none;">
            <div class="spinner"></div>              
          </div>

          <!--*******************************************************   -->


    <style>
        #image-container {
            position: relative;
            width: 250px; /* Ajusta según sea necesario */
            height: 250px; /* Ajusta según sea necesario */
            border: 8px solid white;
            /*border: 1px solid #ccc; /* Opcional, solo para visualizar el contenedor */
        }
        .layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
    </style>
 
    <div class="img-circle" id="image-container"></div>
    <p id="codeimageHexa">    </p>
    <br>
    
 

  <div style="display: flex; align-items: center; justify-content: flex-start; gap: 0;">
    <p style = "font-size: 18px; color: white;" ><i>1- Select image for you NFTUsername</i></p>
    <button onclick="loadImages()" style="background-color: black; color: white; border: 2px solid lime; border-radius: 20px; height: 40px; margin-left: 30px">Next > </button>
 </div>      

<!-- *******************************************************-->

            <h3><font color="white"><p id="Minted_username"></p></font></h3>
            <h4><font color="orange"><p id="Error_Minted_username"></p></font></h4>
      
            <input type="text" id="text-mintear-nft" placeholder=" 2- Enter a username " required required style="border: 2px solid black; border-radius: 20px; width: 75%; margin-bottom: 10px; height: 40px;  font-size: 24px;"/> 
            <br>           
            <br>

            <button id="btn-verify-nft" style="background-color: black; color: white; border: 2px solid lime; border-radius: 20px; height: 40px;">check username before</button>

            <button id="btn-mintear-nft" style="background-color: black; color: white; border: 2px solid lime; border-radius: 20px; height: 40px; display:none;">Mint NFT Username</button>
          </center>


          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>  
</div>
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->
<!-- #####################################################################-->

<!-- ############## ventana emergente crear un perfil ###########################-->
<!-- #################################################################################-->
<div class="container" > 
  <!-- Modal -->
  <div class="modal fade" id="myModalprofile" role="dialog">
    <div class="modal-dialog">    
      <!-- Modal content-->
      <div class="modal-content" style="background: linear-gradient(180deg, lime, black);">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
                     
        <div class="modal-body">    
        
         <div class="profile-form">
           <center> <h2><font color="black ">User Profile</h2></font> </center>     

           <center>
    <div style="width: 80%;">
        <input type="text" id="nombre" placeholder=" Nombre" required style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 40px;">                      
        <textarea id="bio" placeholder=" Biografía" required style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 120px;"></textarea>
        <input type="text" id="ubicacion" placeholder=" Ubicación" style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 40px;">
        <input type="text" id="pagina-web" placeholder=" Página Web" style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 40px;">
        <input type="text" id="foto-perfil" placeholder=" Link to profile picture" style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 40px;">
        <input type="text" id="foto-portada" placeholder=" Link to cover picture" style="border: 2px solid black; border-radius: 20px; width: 100%; margin-bottom: 10px; height: 40px;">
    </div>
</center>
             
               <br>  

 <center><div style="display: flex; width: 80%;">
    <select id="selector_key1" class="form-control" placeholder="select key" style="border: 2px solid black; border-radius: 20px;"></select>
    <select id="selector_key2" class="form-control" placeholder="select key" style="border: 2px solid black; border-radius: 20px;"></select>
    <select id="selector_key3" class="form-control" placeholder="select key" style="border: 2px solid black; border-radius: 20px;"></select>    
</div></center>

<center> <div style="display: flex; width: 80%;">
   
    <select id="selector_key4" class="form-control" placeholder="select key" style="border: 2px solid black; border-radius: 20px;"></select>
    <select id="selector_key5" class="form-control" placeholder="select key" style="border: 2px solid black; border-radius: 20px;"></select>
</div></center>

<br>


<center>
       
       <div id="loadingAnimation-profile" style="display: none;">
              <div class="spinner"></div>               
       </div>

   </center> 



               <br> 
          <center>      
              <button id="btn-create-profile" style="background-color: black; color: white; border: 2px solid lime; border-radius: 20px; height: 40px;"> Guardar Perfil </button>
<button id="btn-update-profile" style="background-color: black; color: white; border: 2px solid lime; border-radius: 20px; height: 40px;"> Editar Perfil </button>
          </center> 

       </div>

        </div>
       
                      
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>      
    </div>
  </div>  
</div>

<!-- ############## ventana emergente recibir tokesn ###########################-->
<!-- #################################################################################-->
<div class="container"> 
  <!-- Modal -->
 <!-- Modal -->
<div class="modal fade" id="myModalQR" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content" style="background: linear-gradient(180deg, lime, black);">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <center><h5><a href="/pagina_principal/0/"><font color="black"> My Public Address   </a></font></h5></center>
         <center><div id="addres-wallet-QR"></div></center>

       
      </div>
      <!--<div class="modal-body">       
      </div>-->
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
</div>
<!-- #####################################################################-->
<!-- #####################################################################-->



<!-- Modal para Compra de NFT -->
<!-- Modal para Compra de NFT -->
<div class="container"> 
  <div class="modal fade" id="buyNftModal" role="dialog">
    <div class="modal-dialog">
      <!-- Contenido del modal -->
      <div class="modal-content" style="background: linear-gradient(180deg, lime, black);">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <center><h5><font color="black">Buy NFT Username</font></h5></center>
        </div>
        <div class="modal-body">
          <center>
            <h6><font color="black">Buy  NFTUsername :</font></h6>           
                       
            <div id="info-sock-to-buy"></div>
                    
          </center>
        </div>
        <div class="modal-footer">

         
          <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
</div>






<!-- Modal predefinido en HTML -->
<div class="modal fade" id="sellNFTModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalLabel">Vender NFT</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!-- Aquí va el contenido dinámico -->
        <p>Precio: <span id="nftPrice"></span></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        
      </div>
    </div>
  </div>
</div>







<!-- ############## ventana emergente mensajes directos ###########################-->
<!-- #################################################################################-->


<style>
    #conversation {
      border: 1px solid #ccc;
      padding: 10px;
      height: 300px;
      overflow-y: scroll;
    }

    #messageInput {
      margin-top: 10px;
    }
  </style>




<div class="container"> 
  <!-- Modal -->
 <!-- Modal -->
<div class="modal fade" id="myModal-msg-direct" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->

    <div class="modal-content" style="background: linear-gradient(180deg, lime, black);">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      

<style>
 
.left-section {
    text-align: left;
} 
.right-section {
    text-align: right;
} 
</style>


<center>
 <div class="container-fluid">


    <div class="left-section" style="display:inline-block; ">
        <img id="profile-photo-sender" src="" width="60" class="img-circle" style="border: 4px solid white;">
        <div id="NFTsender-direct-message"></div>
    </div>

    <div class="right-section" style="display:inline-block; margin-left: 60px;">
        <img id="profile-photo-reciever" src="" width="60" class="img-circle" style="border: 4px solid white;">
        <div id="NFTreceiver-direct-message"></div>
    </div>
</div>

</center>

 
<br>
  <div class="container-fluid">
 
 <center>
  
<!--
  <a href="#"  data-toggle="collapse" data-target="#demo2"style="display:inline-block; margin-left: 0px;"><font color="black">ETH <span class="glyphicon glyphicon-arrow-right"></span></font></a>

  <div style="display:inline-block; margin-left: 50px;" > </div>
  <div style="display:inline-block; margin-left: 50px;" > </div>
    <div style="display:inline-block; margin-left: 50px;" > </div>
  <div style="display:inline-block; margin-left: 50px;" > </div>
  <div style="display:inline-block; margin-left: 50px;" > </div>
 
  
  <a href="#"  data-toggle="collapse" data-target="#demo3" style="display:inline-block; margin-left: 30px;"><font color="black">CAW <span class="glyphicon glyphicon-arrow-right"></span></font></a>
  


  <div id="demo2" class="collapse" >
                          


                          <div class="input-group" style="margin-top: 10px; margin-bottom: 10px; width: 90%;">
                            <input type="text" id="text-mount-ETH-send" class="form-control" placeholder="ETH mount to send" style="border: 2px solid black; border-radius: 20px; width: 80%; height: 40px; ">
                           
                            <div class="input-group-btn">
                              <button id="btn-send-ETH" class="btn btn-default"  style="background-color: black; color: white; border: 2px solid gold; border-radius: 20px; height: 40px;">
                                <span class="glyphicon glyphicon-send"></span>
                              </button>                             
                            </div>                          

                           </div> 
                           
                           
  
  <div id="demo3" class="collapse">

                         <div class="input-group" style=" margin-top: 10px; margin-bottom: 10px; width: 90%;">
                            <input type="text" id="text-mount-CAW-send" class="form-control" placeholder="CAW mount to send" style="border: 2px solid black; border-radius: 20px; width: 80%; height: 40px; ">
                            <div class="input-group-btn">
                              <button id="btn-send-CAW" class="btn btn-default" style="background-color: black; color: white; border: 2px solid gold; border-radius: 20px; height: 40px;">
                                <span class="glyphicon glyphicon-send"></span>
                              </button>                             
                            </div>
                          </div> 

  </div>
-->


</center>
</div>


<center><div id="conversation" style="background-color: black; width: 90%; border: 2px solid black; border-radius: 20px; height: 400px;"></div></center>


<center>
 <div class="input-group" style=" margin-top: 10px; margin-bottom: 10px; width: 90%;">

                           <input type="text" id="messageInput" class="form-control" placeholder="Direct Message" style="border: 2px solid black; border-radius: 20px; width: 80%; height: 40px; ">
                            <div class="input-group-btn">
                              <button class="btn btn-default" onclick="enviarMensaje()" style="background-color: black; color: white; border: 2px solid lime; border-radius: 20px; height: 40px;">
                                <span class="glyphicon glyphicon-send"></span>
                              </button>                             
                            </div>
                          </div> 
</center>
   

      <!--<div class="modal-body">       
      </div>-->
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
</div>
<!-- #####################################################################-->
<!-- #####################################################################-->

        <!-- Puedes agregar más elementos según sea necesario -->
  
<script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
<!-- Archivo JavaScript para cargar contenido dinámico del juego carta Mayor-->
    <script src="games/cartaMayor/loadGameCartas.js"></script>
    <!-- Lógica del juego -->
    <script src="games/cartaMayor/scriptCartas.js"></script>





<script>
    // Definir las palabras clave
    const palabrasClave = ['Tecnología', 'Arte', 'Ciencia', 'Deportes', 'Música'];

    // Función para llenar los selects
    function llenarSelects() {
      for (let i = 1; i <= 5; i++) {
        // Obtener el select actual
        const select = document.getElementById(`selector_key${i}`);

        // Limpiar cualquier opción existente
        select.innerHTML = '';

        // Agregar las opciones
        palabrasClave.forEach(palabra => {
          const opcion = document.createElement('option');
          opcion.value = palabra;
          opcion.text = palabra;
          select.add(opcion);
        });
      }
    }

    // Llenar los selects al cargar la página
    llenarSelects();
  </script>


<script> 

const CAW_tokenABI = [
    {"constant": true, "inputs": [], "name": "name", "outputs": [{"name": "", "type": "string"}], "payable": false, "stateMutability": "view", "type": "function"},
    {"constant": true, "inputs": [{"name": "spender", "type": "address"}, {"name": "owner", "type": "address"}], "name": "allowance", "outputs": [{"name": "", "type": "uint256"}], "payable": false, "stateMutability": "view", "type": "function"},
    {"constant": false, "inputs": [{"name": "contractAddress", "type": "address"}], "name": "authorizeContract", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function"},
    {"constant": true, "inputs": [{"name": "owner", "type": "address"}], "name": "balanceOf", "outputs": [{"name": "", "type": "uint256"}], "payable": false, "stateMutability": "view", "type": "function"},
    {"constant": false, "inputs": [{"name": "spender", "type": "address"}, {"name": "subtractedValue", "type": "uint256"}], "name": "decreaseAllowance", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function"},
    {"constant": true, "inputs": [], "name": "decimals", "outputs": [{"name": "", "type": "uint8"}], "payable": false, "stateMutability": "view", "type": "function"},
    {"constant": false, "inputs": [{"name": "spender", "type": "address"}, {"name": "addedValue", "type": "uint256"}], "name": "increaseAllowance", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function"},
    {"constant": true, "inputs": [], "name": "totalSupply", "outputs": [{"name": "", "type": "uint256"}], "payable": false, "stateMutability": "view", "type": "function"},
    {"constant": true, "inputs": [], "name": "symbol", "outputs": [{"name": "", "type": "string"}], "payable": false, "stateMutability": "view", "type": "function"},
    {"constant": false, "inputs": [{"name": "amount", "type": "uint256"}, {"name": "user", "type": "address"}], "name": "burn", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function"},
    {"constant": false, "inputs": [{"name": "spender", "type": "address"}, {"name": "amount", "type": "uint256"}], "name": "approveCAWTransfer", "outputs": [{"name": "", "type": "bool"}], "payable": false, "stateMutability": "nonpayable", "type": "function"},
    {"constant": false, "inputs": [], "name": "revokeAuthorization", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function"},
    {"constant": true, "inputs": [{"name": "contractAddress", "type": "address"}], "name": "onlyAuthorizedContract", "outputs": [], "payable": false, "stateMutability": "view", "type": "function"}
];

          

const tokenContractAddress = '0x8f78976a0fdf8f66ad81bb7d7c9b8d4a695022e3';//Sock -polygon  




const NFT_ContractABI=[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"FundsWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"username","type":"string"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"NFTForSale","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"string","name":"username","type":"string"}],"name":"NFTMinted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"username","type":"string"}],"name":"NFTSaleCancelled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"username","type":"string"},{"indexed":true,"internalType":"address","name":"buyer","type":"address"},{"indexed":false,"internalType":"uint256","name":"price","type":"uint256"}],"name":"NFTSold","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"username","type":"string"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"}],"name":"NFTTransferred","type":"event"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"buyNFT","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"cancelNFTSale","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getEtherBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"getHashFromUsername","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"walletAddress","type":"address"}],"name":"getMintedUsernames","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getNFTInfoById","outputs":[{"components":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"string","name":"username","type":"string"},{"internalType":"bool","name":"isMinted","type":"bool"},{"internalType":"bool","name":"isForSale","type":"bool"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"bytes32","name":"usernameHash","type":"bytes32"},{"internalType":"bytes32","name":"imagecodeHexa","type":"bytes32"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"internalType":"struct NFTUsernameContract.NFT","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"getNFTInfoByUsername","outputs":[{"components":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"string","name":"username","type":"string"},{"internalType":"bool","name":"isMinted","type":"bool"},{"internalType":"bool","name":"isForSale","type":"bool"},{"internalType":"uint256","name":"price","type":"uint256"},{"internalType":"bytes32","name":"usernameHash","type":"bytes32"},{"internalType":"bytes32","name":"imagecodeHexa","type":"bytes32"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"internalType":"struct NFTUsernameContract.NFT","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"getNFTOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"getNFTTokenId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"getNFTTokenTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"walletAddress","type":"address"}],"name":"getNFTUsername","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getNftIsForSaleCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalMintedNFTs","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getUsernameByTokenId","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes32","name":"hash","type":"bytes32"}],"name":"getUsernameFromHash","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"startIndex","type":"uint256"},{"internalType":"uint256","name":"endIndex","type":"uint256"}],"name":"getUsernamesInRange","outputs":[{"internalType":"string[]","name":"","type":"string[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"getimagecodeHexaFromUsername","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"isCallerNFTOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"nftUsername","type":"string"}],"name":"isMinted","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"}],"name":"isNFTForSale","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"nftOwner","type":"address"},{"internalType":"string","name":"nftUsername","type":"string"},{"internalType":"address","name":"caller","type":"address"}],"name":"isNFTOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"},{"internalType":"bytes32","name":"imagecodeHexa","type":"bytes32"}],"name":"mintNFT","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"username","type":"string"},{"internalType":"uint256","name":"price","type":"uint256"}],"name":"sellNFT","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"string","name":"username","type":"string"}],"name":"transferNFT","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}];
 
const nftContractAddress = '0xac6f27b3b55b96d7f6bfc4b905257bed6758922e';//polygon verificado 



const Transfer_ContractABI=[{"constant":false,"inputs":[{"name":"senderNFTUsername","type":"string"},{"name":"receiverNFTUsername","type":"string"},{"name":"userTimestamp","type":"uint256"},{"name":"signatureToUser","type":"bytes32"},{"name":"typeAction","type":"string"}],"name":"actionTransfer","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"nftUsername","type":"string"}],"name":"checkNFTOwnership","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"cawTokenAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"cawContractStaking","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"nftContractAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"}],"name":"isNFTMinted","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getNFTUsername","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"cawTokenAddress","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"user","type":"address"}],"name":"getCawBalance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}];

const transferContractAddress = '0x9582dacf43aa2bf143ac909faa5a718cbca92333';//polygon





const Profile_ContractABI = [{"constant":false,"inputs":[{"name":"username","type":"string"},{"name":"profileJson","type":"string"}],"name":"createProfile","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"follower","type":"string"},{"name":"following","type":"string"},{"name":"userTimestamp","type":"uint256"},{"name":"signatureToUser","type":"bytes32"}],"name":"follow","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"nftusername","type":"string"}],"name":"getFollowing","outputs":[{"name":"","type":"string[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"follower","type":"string"},{"name":"following","type":"string"}],"name":"unfollow","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"nftusername","type":"string"}],"name":"getProfile","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"follower","type":"string"},{"name":"following","type":"string"}],"name":"isFollowing","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getProfileCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"follower","type":"string"},{"name":"following","type":"string"}],"name":"getFollowingTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftusername","type":"string"}],"name":"getFollowingCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftusername","type":"string"}],"name":"getProfileTime","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftusername","type":"string"}],"name":"getFollowerCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"startIndex","type":"uint256"},{"name":"endIndex","type":"uint256"}],"name":"getProfilesInRange","outputs":[{"name":"","type":"tuple[]","components":[{"name":"id","type":"uint256"},{"name":"name","type":"string"},{"name":"age","type":"uint256"}]}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"username","type":"string"},{"name":"profileJson","type":"string"}],"name":"updateProfile","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}];





const profileContractAddress = '0xa569895d95Eec6F96939c4988e9f0E0e095BbB70'; //polygon




const Publisher_ContractABI=[{"constant":false,"inputs":[{"name":"senderNFTUsername","type":"string"},{"name":"userTimestamp","type":"uint256"},{"name":"signatureToUser","type":"bytes32"},{"name":"content","type":"string"},{"name":"jsonMetadata","type":"string"},{"name":"publicationType","type":"uint8"},{"name":"parentPublicationId","type":"uint256"}],"name":"createPublication","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"nftUsername","type":"string"},{"name":"id","type":"uint256"}],"name":"deletePublication","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTUsername","type":"string"},{"name":"receiverNFTUsername","type":"string"},{"name":"userTimestamp","type":"uint256"},{"name":"signatureToUser","type":"bytes32"},{"name":"id","type":"uint256"}],"name":"addReaction","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTUsername","type":"string"},{"name":"receiverNFTUsername","type":"string"},{"name":"userTimestamp","type":"uint256"},{"name":"signatureToUser","type":"bytes32"},{"name":"id","type":"uint256"}],"name":"sharePublication","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"}],"name":"getPublicationCounts","outputs":[{"name":"","type":"uint256"},{"name":"","type":"uint256"},{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"publicationId","type":"uint256"}],"name":"getLikesCountByPublication","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"publicationId","type":"uint256"}],"name":"getSharesCountByPublication","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"},{"name":"id","type":"uint256"}],"name":"getUserPublication","outputs":[{"name":"","type":"string"},{"name":"","type":"uint256"},{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"uint256"},{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getTotalPublications","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"}],"name":"getUserTotalPublicationsCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"},{"name":"id","type":"uint256"}],"name":"getSmartUserPublication","outputs":[{"name":"","type":"tuple","components":[{"name":"id","type":"uint256"},{"name":"content","type":"string"},{"name":"jsonMetadata","type":"string"},{"name":"nftUsername","type":"string"},{"name":"publicationType","type":"tuple","components":[{"name":"0","type":"uint8"}]},{"name":"parentPublicationId","type":"uint256"},{"name":"timestamp","type":"uint256"}],"internalType":"struct CawPublisher.Publication[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"},{"name":"id","type":"uint256"}],"name":"getUserMainPost","outputs":[{"name":"","type":"tuple","components":[{"name":"id","type":"uint256"},{"name":"content","type":"string"},{"name":"jsonMetadata","type":"string"},{"name":"nftUsername","type":"string"},{"name":"publicationType","type":"uint8"},{"name":"parentPublicationId","type":"uint256"},{"name":"timestamp","type":"uint256"}]}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"},{"name":"publicationId","type":"uint256"}],"name":"getUserShareStatusByPublication","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"},{"name":"publicationId","type":"uint256"}],"name":"getUserLikeStatusByPublication","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"publicationId","type":"uint256"}],"name":"getCommentCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"publicationId","type":"uint256"}],"name":"getResponsesToPublication","outputs":[{"name":"","type":"uint256[]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"},{"name":"publicationId","type":"uint256"}],"name":"getUserCommentStatusByPublication","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTUsername","type":"string"},{"name":"content","type":"string"},{"name":"jsonMetadata","type":"string"},{"name":"parentPublicationId","type":"uint256"}],"name":"createPublicationResponse","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"publicationIndex","type":"uint256"}],"name":"getIndexPublication","outputs":[{"name":"","type":"string"},{"name":"","type":"uint256"},{"name":"","type":"string"},{"name":"","type":"string"},{"name":"","type":"uint256"},{"name":"","type":"uint8"},{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}];


//0x54cdc95d8e45b9bde89556ded5fa38a5856a253c
const publisherContractAddress = '0xA9233F5a7e5b5503EE0E2C98050C138Ae9408bF9';//polygon






const DirectMessage_ContractABI=[{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"encryptedMessage","type":"bytes"},{"name":"jsonMetadataEncrypted","type":"string"},{"name":"signature","type":"bytes32"}],"name":"sendDirectMessage","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"messageId","type":"uint256"}],"name":"markMessageAsDeleted","outputs":[],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"messageId","type":"uint256"}],"name":"markMessageAsNotDeleted","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"messageId","type":"uint256"}],"name":"undeleteAllSenderMessages","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"messageId","type":"uint256"}],"name":"markMessageAsDeleted","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"}],"name":"getConversation","outputs":[{"name":"","type":"bytes[][]"},{"name":"","type":"bytes[][]"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"}],"name":"deleteAllSenderMessages","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"messageId","type":"uint256"}],"name":"markMessageAsNotDeleted","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"}],"name":"deleteAllSenderMessages","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"senderNFTHash","type":"bytes32"},{"name":"receiverNFTHash","type":"bytes32"},{"name":"messageId","type":"uint256"}],"name":"undeleteAllSenderMessages","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"}],"name":"checkNFTOwnership","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"nftUsername","type":"string"}],"name":"isNFTMinted","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"walletAddress","type":"address"}],"name":"getNFTUsername","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"signer","type":"address"},{"name":"message","type":"bytes"},{"name":"signature","type":"bytes32"}],"name":"verifySignature","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"pure","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"senderNFTHash","type":"bytes32"},{"indexed":true,"name":"receiverNFTHash","type":"bytes32"}],"name":"DirectMessageSent","type":"event"}];

  
  
const directMessageContractAddress = '0x721ae299de508da89b4f68e28098ff60fde98065'; //polygon
  
    
      
const StakingPool_ContractABI = [{"constant":true,"inputs":[],"name":"getTotalStaked","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getTotalRewards","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"stakers","outputs":[{"name":"amountStaked","type":"uint256"},{"name":"lastClaimTimestamp","type":"uint256"},{"name":"totalRewardsEarned","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"amount","type":"uint256"}],"name":"stake","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"amount","type":"uint256"}],"name":"unstake","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"claimRewards","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"name":"staker","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"Staked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"staker","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"Unstaked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"staker","type":"address"},{"indexed":false,"name":"amount","type":"uint256"}],"name":"RewardsClaimed","type":"event"},{"constant":true,"inputs":[{"name":"stakerAddress","type":"address"}],"name":"calculatePendingRewards","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"stakerAddress","type":"address"}],"name":"getStaker","outputs":[{"name":"amountStaked","type":"uint256"},{"name":"lastClaimTimestamp","type":"uint256"},{"name":"totalRewardsEarned","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}]; 


const stakingPoolContractAddress = '0xC6284bBEA6E993Ccf60add9DB1F7AEC644f9aCEa';    //polygon  


/*
FreeTokens_ContractABI = [{"constant":false,"inputs":[],"name":"conectar","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[],"name":"requestTokensCaw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"constant":false,"inputs":[],"name":"receiveTokensCaw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"obtenerSaldoEtherContrato","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"obtenerSaldoCawContrato","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_receiver","type":"address payable"}],"name":"sendEtherToAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}];


const freeTokensContractAddress = '0xa0b89d894939e5810849e602a3e3f3e75931b07e';//polygon  

*/
alert(`Exito`);
let globalWalletKey = "";

const provider = new ethers.providers.JsonRpcProvider("https://polygon-mainnet.g.alchemy.com/v2/8gJweGU1u8NB60FICShTvPFy3oUu_zsA");

// Otros códigos que quieras incluir...


window.onload = async function() {
                         
const privateKey = obtenerClaveDesencriptada(); // Desencriptar la clave privada con la contraseña
    
if (!privateKey) return;
                       
            alert(`Exito se conecto la key privada:`);

            // Crear una instancia de web3 usando la clave privada
            const wallet = new ethers.Wallet(privateKey);

            //const provider = new ethers.providers.Web3Provider(window.ethereum);
              // Conectar a Alchemy
    
    
            const myAddress = wallet.address;


            alert(`Exito myAddress:xxxx ` + myAddress);
            
            globalWalletKey = myAddress;
            const start = myAddress.slice(0, 6);
            const end = myAddress.slice(-4);
            document.getElementById('addres-wallet').innerText = `${start}...${end}`;
            document.getElementById('addres-wallet').style.color = 'white'; // Cambia el color del texto a blanco

            // Mostrar el saldo de ETH
            await obtenerSaldo(wallet);
            info_user_keys();


            const btnMintearNFT = document.getElementById('btn-mintear-nft');
            btnMintearNFT.addEventListener('click', mintearNFT);

            const btnVerifyMintearNFT = document.getElementById('btn-verify-nft');
            btnVerifyMintearNFT.addEventListener('click', verifymintearNFT);
  
            // Aquí puedes llamar a la función para conectar con MetaMask
            ///conectarMetaMask();

            // Cualquier otra lógica necesaria se puede agregar aquí
        };

        async function obtenerSaldo(wallet) {
    try {
        // Obtener el saldo de MATIC
        const balanceWei = await provider.getBalance(wallet.address);
        const balanceEther = ethers.utils.formatEther(balanceWei);
        document.getElementById('saldo_ETH').innerText = `POL: ${balanceEther}`;
        document.getElementById('saldo_ETH').style.color = 'Magenta';

        // Crear instancia del contrato CAW usando ethers.js
        const tokenContract = new ethers.Contract(tokenContractAddress, CAW_tokenABI, provider);

        // Obtener el saldo del token CAW
        const accountBalance = await tokenContract.balanceOf(wallet.address);
        const balanceString = ethers.utils.formatUnits(accountBalance, 18);
        
        // Mostrar saldo del token CAW en el elemento correspondiente
        const saldoElement = document.getElementById('saldo_CAW');
        saldoElement.innerText = balanceString;
        saldoElement.style.color = 'lime';
        
    } catch (error) {
        console.error("Error obteniendo saldo:", error);
    }
}


// Función para desencriptar la clave privada
function obtenerClaveDesencriptada() {
    const encryptedKey = localStorage.getItem("encryptedPrivateKey");
    const password = localStorage.getItem("walletPassword")?.trim(); // Asegúrate de limpiar espacios en blanco

    alert(`Clave encriptada obtenida: ${encryptedKey}`);
    alert(`Contraseña guardada obtenida: ${password}`);

    if (encryptedKey) {
        try {
            // Intenta desencriptar la clave
            const decryptedKey = CryptoJS.AES.decrypt(encryptedKey, password).toString(CryptoJS.enc.Utf8);
            if (!decryptedKey) {
                alert("Error: la clave privada desencriptada está vacía.");
                return null;
            }
            return decryptedKey;
        } catch (error) {
            alert("Error al desencriptar la clave privada. Asegúrate de ingresar la contraseña correcta.");
            return null;
        }
    } else {
        alert("No hay ninguna billetera almacenada.");
        return null;
    }
}
  




        
    </script>



 <script>

// Función para mintear un NFT usando la billetera personalizada
async function mintearNFT() {
    const loadingAnimation = document.getElementById('loadingAnimation-mint');
    loadingAnimation.style.display = 'block'; // Muestra la animación

    // Obtener la clave privada desencriptada
    const privateKey = obtenerClaveDesencriptada();
    if (!privateKey) {
        loadingAnimation.style.display = 'none';
        return;
    }

    // Crear el signer a partir de la clave privada y el proveedor
    const signer = new ethers.Wallet(privateKey, provider);

    // Instanciar el contrato usando ethers.js
    const contract = new ethers.Contract(nftContractAddress, NFT_ContractABI, signer);

    const nftusername = document.getElementById('text-mintear-nft').value;
    const codeimageHexa = document.getElementById("codeimageHexa").textContent;
    const maticrequired = document.getElementById("mount-minteo").textContent;
    const maticAmount = ethers.utils.parseEther(maticrequired); // Convierte a Wei

    try {
        // Llamar a la función `mintNFT` en el contrato
        console.log("El valor maticAmount:", maticAmount);
        const tx = await contract.mintNFT(nftusername, codeimageHexa, {
            gasLimit: 800000,
            gasPrice: ethers.utils.parseUnits('60', 'gwei'),
            value: maticAmount
        });

        // Espera a que la transacción sea minada
        await tx.wait();

        loadingAnimation.style.display = 'none'; // Oculta la animación
        $('#myModal').modal('hide');

        // Llamar a la función de perfil después de mintear
        info_profile_sock();

        // Mostrar mensaje de éxito
        showSuccess('NFT minteado correctamente.');
    } catch (error) {
        loadingAnimation.style.display = 'none'; // Oculta la animación

        if (error.message.includes("Invalid username")) {
            showSuccess('Invalid username.');
        } else if (error.message.includes("Insufficient Sock balance")) {
            showSuccess('Insufficient CAW balance.');
        } else {
            console.error('Error al mintear el NFT:', error);
            showSuccess('Error al mintear el NFT.');
        }
    }
}

// Función para obtener los NFT usernames minteados usando la billetera personalizada (sin firmar)
async function getmintedNFT() {
    // Instanciar el contrato solo con el provider para realizar una consulta
    const contract = new ethers.Contract(nftContractAddress, NFT_ContractABI, provider);

    try {
        // Llamar a la función de solo lectura `getMintedUsernames`
        const list_username = await contract.getMintedUsernames(globalWalletAddress);

        const selector = document.getElementById('selector_NFTs');
        // Limpiar las opciones existentes
        selector.innerHTML = '';
        // Agregar las opciones de NFTs
        for (const nft of list_username) {
            const option = document.createElement('option');
            option.text = nft;
            selector.add(option);
        }

        // Actualizar la imagen del NFT y el perfil
        getImageNFTUsername("NFT_image-container");
        info_profile_sock();

        // Mostrar mensaje de éxito
        showSuccess('List NFT username OK!');
    } catch (error) {
        showSuccess('No List NFT username.');
        console.error('Error list NFT:', error);
    }
}


function info_user_keys() {
    const encryptedPrivateKey = localStorage.getItem("encryptedPrivateKey"); // Clave privada encriptada
    const password = localStorage.getItem("walletPassword")?.trim(); // Contraseña

    // Asegurarnos de que tanto la clave encriptada como la contraseña están disponibles
    if (!encryptedPrivateKey || !password) {
        document.getElementById('info-user-keys').innerHTML = "<p>No se encuentran las credenciales necesarias para mostrar.</p>";
        return;
    }

    try {
        // Intentar desencriptar la clave privada
        const decryptedPrivateKey = CryptoJS.AES.decrypt(encryptedPrivateKey, password).toString(CryptoJS.enc.Utf8);

        if (!decryptedPrivateKey) {
            document.getElementById('info-user-keys').innerHTML = "<p>Error al desencriptar la clave privada, la contraseña puede ser incorrecta.</p>";
            return;
        }

        // Obtener la clave pública a partir de la clave privada desencriptada
        const wallet = new ethers.Wallet(decryptedPrivateKey);
        const publicKey = wallet.address;

        // Crear el contenido HTML con las credenciales
        const content = `
            <p><strong>Clave Pública:</strong> ${publicKey}</p>
            <p><strong>Clave Privada Normal:</strong> ${decryptedPrivateKey}</p>
            <p><strong>Clave Privada Encriptada:</strong> ${encryptedPrivateKey}</p>
            <p><strong>Contraseña:</strong> ${password}</p>
        `;

        // Mostrar el contenido dentro del div con id "info-user-keys"
        document.getElementById('info-user-keys').innerHTML = content;

    } catch (error) {
        // Si ocurre algún error, se maneja de manera adecuada
        document.getElementById('info-user-keys').innerHTML = "<p>Error al procesar las credenciales. Asegúrate de que la contraseña y la clave encriptada sean correctas.</p>";
        console.error("Error al procesar las credenciales:", error);
    }
}


 function tiempoTranscurrido(timestamp) {

  timestamp=timestamp*1000;
  const diferencia = Date.now() - timestamp;
  const segundos = Math.floor(diferencia / 1000);
  const minutos = Math.floor(segundos / 60);
  const horas = Math.floor(minutos / 60);
  const dias = Math.floor(horas / 24);

  if (segundos < 60) {
    return 'Hace unos segundos';
  } else if (minutos < 60) {
    return `Hace ${minutos} ${minutos === 1 ? 'minuto' : 'minutos'}`;
  } else if (horas < 24) {
    return `Hace ${horas} ${horas === 1 ? 'hora' : 'horas'}`;
  } else {
    const fecha = new Date(timestamp);
    return fecha.toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' });
  }
}     
         


          // Funciones para mostrar mensajes en la página

           function showSuccess(message) {
            const successElement = document.getElementById('success-message');
            successElement.innerText = message;
          } 
          function showSuccess(message) {
            const successElement = document.getElementById('success-message');
            successElement.innerText = message;
          }

          function showError(message) {
            const errorElement = document.getElementById('error-message');
            errorElement.innerText = message;
          }

          function showBalance(balance) {
            const balanceElement = document.getElementById('saldo');
            balanceElement.innerText = 'Saldo: ' + balance;
          }



async function verifymintearNFT() {

    try {

         console.error("Verificando minteo :");
        // Usamos la dirección guardada en globalWalletKey
        const myAddress = globalWalletKey;

        // Crear instancia del contrato NFT usando ethers.js
        const contractNFT = new ethers.Contract(nftContractAddress, NFT_ContractABI, provider);

        const nftusername = document.getElementById('text-mintear-nft').value;
        const bottonMint = document.getElementById('btn-mintear-nft');
        const bottonVerifyMint = document.getElementById('btn-verify-nft');
        const errorDisplay = document.getElementById('Error_Minted_username');
        const readyDisplay = document.getElementById('Minted_username');

        // Llamada a isMinted usando ethers.js en lugar de web3
        const isMintedNFT = await contractNFT.isMinted(nftusername);

        if (isMintedNFT) {
            errorDisplay.style.display = 'block';
            readyDisplay.style.display = 'none';
            errorDisplay.textContent = 'The username is not available!';
        } else {
            errorDisplay.style.display = 'none';
            readyDisplay.style.display = 'block';
            readyDisplay.textContent = 'The username is For You! :)';
            bottonMint.style.display = 'block';
            bottonVerifyMint.style.display = 'none';
        }
    } catch (error) {
        console.error("Error verificando minteo de NFT:", error);
    }
}    


</script>

<script>
const inputField = document.getElementById('text-mintear-nft');
const output = document.getElementById('mount-minteo');
const errorDisplay = document.getElementById('Error_Minted_username');
const bottonMint = document.getElementById('btn-mintear-nft');

const bottonVerifyMint = document.getElementById('btn-verify-nft');


function isValidNFTUsername(username) {
  return /^[a-z0-9]+$/.test(username);
}


inputField.addEventListener('input', function() {
  const enteredText = inputField.value.trim();
  const count = enteredText.length;
  const saldoCaw = parseFloat(document.getElementById('saldo_CAW').textContent);
  bottonMint.style.display = 'none';
  bottonVerifyMint.style.display = 'block';
  
  if (!isValidNFTUsername(enteredText)) {
    errorDisplay.style.display = 'block';
    errorDisplay.textContent = 'Only lowercase letters and numbers are valid.';
    output.textContent = '';
    //bottonMint.style.display = 'none';
    
  } else {
    errorDisplay.style.display = 'none';
    //bottonMint.style.display = 'block';

    let maticNeeded = 0;
    if (count >= 8) {
      maticNeeded = 8;
    } else if (count === 1) {
      maticNeeded = 36;
    } else {
      switch (count) {
        case 2:
          maticNeeded = 29;
          break;
        case 3:
          maticNeeded = 23;
          break;
        case 4:
          maticNeeded = 18;
          break;
        case 5:
          maticNeeded = 14;
          break;
        case 6:
          maticNeeded = 11;
          break;
        case 7:
          maticNeeded = 9;
          break;
      }
    }

    if (saldoCaw < maticNeeded) {
      output.textContent = `${maticNeeded}`
      output.style.fontSize = '24px'; // Cambia el tamaño de fuente
      output.style.color = 'white'; // Cambia el color
      //bottonMint.style.display = 'none';
    } else {
      output.textContent = `${maticNeeded}`;
      output.style.fontSize = '24px'; // Cambia el tamaño de fuente
      output.style.color = 'red'; // Cambia el color
      errorDisplay.textContent="Insufficient MATIC balance"
      //bottonMint.style.display = 'block';
    }
  }
});

</script>
  
<script>
const textArea = document.getElementById('publicacion');
const charCount = document.getElementById('char-count');
const butonPublication=document.getElementById('btn-publication')

textArea.addEventListener('input', function() {
    // Obtener el conteo de caracteres restantes
    const maxLength = 420;
    const remaining = maxLength - textArea.value.length;

  
    

    // Mostrar el conteo solo cuando sea 21 o menos, o si se ha superado el límite
    if (remaining <= 31 || remaining < 0) {
        charCount.textContent = remaining < 0 ? '0' : remaining;
    } else {
        charCount.textContent = ''; // Si hay más de 21 caracteres restantes, oculta el conteo
    }

    

    if (remaining < 0){
        butonPublication.style.display='none';
    }else{
        butonPublication.style.display='block';
    }
    

    
});

</script>  


<script>
  // Busca y colorea los caracteres @ y #
const postText = document.getElementById('postText');
const text = postText.innerHTML;
const modifiedText = text
    .replace(/@(\S+)/g, '<span class="atSymbol">@$1</span>')
    .replace(/#(\S+)/g, '<span class="hashtag">#$1</span>');
postText.innerHTML = modifiedText;

// Revisar si hay un enlace de imagen o video
const mediaContent = document.getElementById('mediaContent');
const linkToMedia = 'https://pbs.twimg.com/profile_banners/3359503481/1691164787/1500x500'; // Ejemplo de enlace a imagen
const linkToVideo = 'https://youtu.be/8DWeaY3EROE'; // Ejemplo de enlace a video

// Verificar si es una imagen
if (/\.(jpeg|jpg|gif|png)$/.test(linkToImage)) {
    mediaContent.innerHTML = `<img src="${linkToImage}" alt="Imagen">`;
} else {
    mediaContent.innerHTML = 'No se encontró imagen';
}

//if (linkToMedia.endsWith('.jpg') || linkToMedia.endsWith('.png') || linkToMedia.endsWith('.gif')) {
    // Muestra la imagen
//    mediaContent.innerHTML = `<img src="${linkToMedia}" alt="Imagen">`;
//} else if (linkToMedia.endsWith('.mp4') || linkToMedia.endsWith('.avi') || linkToMedia.endsWith('.mov')) {
    // Muestra el video
//    mediaContent.innerHTML = `<video controls><source src="${linkToVideo}" type="video/mp4"></video>`;
//}
</script>

 <script>
          function myFunctionbtc() {
            // Crea un área de texto temporal para copiar el contenido
            var areaDeTextoTemp = document.createElement("textarea");
            areaDeTextoTemp.value = globalWalletKey;

            // Agrega el área de texto temporal al documento
            document.body.appendChild(areaDeTextoTemp);

            // Selecciona el contenido del área de texto
            areaDeTextoTemp.select();
            areaDeTextoTemp.setSelectionRange(0, 99999); // Para dispositivos móviles

            // Intenta copiar el contenido al portapapeles
            document.execCommand("copy");

            // Elimina el área de texto temporal ya que ya no es necesaria
            document.body.removeChild(areaDeTextoTemp);

            // Muestra el mensaje de "Copiado!" en el botón
            var btnCopyKey = document.getElementById("btn-copy-key");
            var originalContent = btnCopyKey.innerHTML;
            btnCopyKey.innerHTML = "<font color='white'>¡Copiado!</font>";

            // Vuelve al estado original después de 2 segundos
            setTimeout(function() {
                btnCopyKey.innerHTML = originalContent;
            }, 2000);
        }
          
          
          </script>

<script>
 

  
 function generarCodigoQR() {
        var divElement = document.getElementById("addres-wallet");
        var divElementQR = document.getElementById("addres-wallet-QR");
        divElementQR.innerText="";

        if (divElement) {
          var walletAddress = globalWalletKey.trim();
          var qrcode = new QRCode(divElementQR, {
            text: walletAddress,
            width: 256,
            height: 256,
          });
        } else {
          console.error("Elemento no encontrado: addres-wallet");
        }
  }

</script>





<script src="bootstrap/js/jquery.min.js" ></script>
<script src="bootstrap/js/bootstrap.min.js"></script>

</body>
</html>